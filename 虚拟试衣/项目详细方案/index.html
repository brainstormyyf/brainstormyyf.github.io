<!doctype html><html data-bs-theme="light light" itemscope itemtype=http://schema.org/WebPage lang=zh-hans><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?display=swap&amp;family=Poppins&amp;family=Noto+Serif+Simplified+Chinese&amp;family=Agbalumo" rel=stylesheet><link rel=manifest href=/manifest.webmanifest><meta name=description content="项目详细方案"><link rel=icon href=/images/logo.svg type=image/svg+xml><link rel=apple-touch-icon href=/images/logo_hu14cbaa2acd7d9369ea4f7018de9966a0_31683_180x180_resize_box_3.png sizes=180x180 type=image/png><link rel=mask-icon href=/images/logo.svg color=#7952b3><meta property="og:title" content="项目详细方案"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E9%A1%B9%E7%9B%AE%E8%AF%A6%E7%BB%86%E6%96%B9%E6%A1%88/"><meta property="article:section" content="虚拟试衣"><meta property="article:published_time" content="2024-02-27T17:58:37+08:00"><meta property="article:modified_time" content="2024-02-27T17:58:37+08:00"><meta itemprop=name content="项目详细方案"><meta itemprop=description content><meta itemprop=datePublished content="2024-02-27T17:58:37+08:00"><meta itemprop=dateModified content="2024-02-27T17:58:37+08:00"><meta itemprop=wordCount content="1617"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="项目详细方案"><meta name=twitter:description content><title>项目详细方案 - 虚拟试衣 - Yifeng's Blog</title>
<link href="/css/hb.55b0adeefccca2e3b52c492e190e3b4c52c30620f3ed90fefb160fd7c690d034.css" rel=stylesheet><script src=/js/init.577d4e90bff5601d5756fcf799b0e53568bf56cea3b80fe43f66c9d365e8100c.js integrity="sha256-V31OkL/1YB1XVvz3mbDlNWi/Vs6juA/kP2bJ02XoEAw="></script><link rel=stylesheet href=/css/search.ee67fb063f2e4be8eff1be9d9806279c3c3d43570b6266c759281faac3804b11.css></head><body><noscript><div class="alert alert-danger text-center rounded-0" role=alert><svg aria-hidden="true" class="bi bi-exclamation-square-fillbi bi-exclamation-square-fill hi-svg-inline me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm6 4c.535.0.954.462.9.995l-.35 3.507a.552.552.0 01-1.1.0L7.1 4.995A.905.905.0 018 4m.002 6a1 1 0 110 2 1 1 0 010-2"/></svg>你的浏览器不支持 JavaScript。</div></noscript><header class=hb-header><nav class="hb-header-nav navbar navbar-expand-lg"><div class=container-fluid><button class="navbar-toggler border-0 shadow-none d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=.hb-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg aria-hidden="true" class="bi bi-listbi bi-list hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M2.5 12a.5.5.0 01.5-.5h10a.5.5.0 010 1H3a.5.5.0 01-.5-.5m0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 8m0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 4"/></svg></button>
<a class="navbar-brand d-flex align-items-center" href=/><img src=/images/logo.svg alt=Logo width=391 height=391 class="hb-header-logo d-inline-block align-text-top me-2">YAO</a><div class="d-flex order-5"><div class="search-modal-toggle hb-header-search-form d-flex align-items-center ms-lg-1"><div class="hb-header-search-input-container position-relative"><button type=button class="hb-header-search-icon border-0 bg-transparent px-2 d-flex d-lg-block" aria-label="Toggle search">
<svg aria-hidden="true" class="bi bi-searchbi bi-search hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1 1 0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"/></svg>
</button>
<input class="form-control rounded-5 d-none d-lg-block ms-lg-1" id=hb-header-search-input placeholder=搜索>
<span class="hb-header-search-keys position-absolute d-none d-lg-block"><kbd>CTRL</kbd>
<kbd>K</kbd></span></div></div><button class="navbar-toggler border-0 shadow-none px-2" type=button data-bs-toggle=offcanvas data-bs-target=#hb-header-content aria-controls=hb-header-content aria-label="Toggle navigation"><svg aria-hidden="true" class="bi bi-three-dotsbi bi-three-dots hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3"/></svg></button></div><div class="offcanvas offcanvas-lg offcanvas-end" tabindex=-1 id=hb-header-content aria-labelledby=hb-header-content-label><div class=offcanvas-header><h5 class=offcanvas-title id=hb-header-content-label>YAO</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close></button></div><div class=offcanvas-body><ul class="hb-header-menus navbar-nav flex-row flex-wrap"><li class="hb-header-menu nav-item col-6 col-lg-auto"><a class=nav-link href=/%E7%AE%80%E4%BB%8B/><svg aria-hidden="true" class="bi bi-incognitobi bi-incognito hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="m4.736 1.968-.892 3.269-.014.058C2.113 5.568 1 6.006 1 6.5 1 7.328 4.134 8 8 8s7-.672 7-1.5c0-.494-1.113-.932-2.83-1.205l-.014-.058-.892-3.27c-.146-.533-.698-.849-1.239-.734C9.411 1.363 8.62 1.5 8 1.5s-1.411-.136-2.025-.267c-.541-.115-1.093.2-1.239.735m.015 3.867a.25.25.0 01.274-.224c.9.092 1.91.143 2.975.143a30 30 0 002.975-.143.25.25.0 01.05.498c-.918.093-1.944.145-3.025.145s-2.107-.052-3.025-.145a.25.25.0 01-.224-.274M3.5 10h2a.5.5.0 01.5.5v1a1.5 1.5.0 01-3 0v-1a.5.5.0 01.5-.5m-1.5.5q.001-.264.085-.5H2a.5.5.0 010-1h3.5a1.5 1.5.0 011.488 1.312 3.5 3.5.0 012.024.0A1.5 1.5.0 0110.5 9H14a.5.5.0 010 1h-.085q.084.236.085.5v1a2.5 2.5.0 01-5 0v-.14l-.21-.07a2.5 2.5.0 00-1.58.0l-.21.07v.14a2.5 2.5.0 01-5 0zm8.5-.5h2a.5.5.0 01.5.5v1a1.5 1.5.0 01-3 0v-1a.5.5.0 01.5-.5"/></svg>简介</a></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto"><a class=nav-link id=header-menu-column href role=button data-bs-toggle=dropdown data-bs-reference=#header-menu-column-submenus aria-expanded=false><div class="nav-link-content d-flex align-items-center"><svg aria-hidden="true" class="bi bi-bookbi bi-book hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"/></svg>专栏<span class="dropdown-toggle-icon d-flex align-items-center ms-1"><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67"/></svg></span></div></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby=header-menu-column data-columns=2 data-bs-popper=none><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-togglesbi bi-toggles hi-svg-inline text-primary" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 9a3.5 3.5.0 100 7h7a3.5 3.5.0 100-7zm7 6a2.5 2.5.0 110-5 2.5 2.5.0 010 5m-7-14a2.5 2.5.0 100 5 2.5 2.5.0 000-5m2.45.0A3.5 3.5.0 018 3.5 3.5 3.5.0 016.95 6h4.55a2.5 2.5.0 000-5zM4.5.0h7a3.5 3.5.0 110 7h-7a3.5 3.5.0 110-7"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">开发工具</div><p class="dropdown-item-desc mb-0 text-wrap">git,pip,anaconda,脚本</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/408/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-pc-display-horizontalbi bi-pc-display-horizontal hi-svg-inline" fill="currentcolor" height="2em" style="color:#e6492a" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M1.5.0A1.5 1.5.0 000 1.5v7A1.5 1.5.0 001.5 10H6v1H1a1 1 0 00-1 1v3a1 1 0 001 1h14a1 1 0 001-1v-3a1 1 0 00-1-1h-5v-1h4.5A1.5 1.5.0 0016 8.5v-7A1.5 1.5.0 0014.5.0zm0 1h13a.5.5.0 01.5.5v7a.5.5.0 01-.5.5h-13A.5.5.0 011 8.5v-7a.5.5.0 01.5-.5M12 12.5a.5.5.0 111 0 .5.5.0 01-1 0m2 0a.5.5.0 111 0 .5.5.0 01-1 0M1.5 12h5a.5.5.0 010 1h-5a.5.5.0 010-1M1 14.25a.25.25.0 01.25-.25h5.5a.25.25.0 110 .5h-5.5A.25.25.0 011 14.25"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">计算机四大件</div><p class="dropdown-item-desc mb-0 text-wrap">DS、OS、CO、CN</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/hugo%E5%8D%9A%E5%AE%A2/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="hi-svg-inline" fill="currentcolor" height="2em" role="img" style="color:green" viewBox="0 0 24 24" width="2em" xmlns="http://www.w3.org/2000/svg"><title>Hugo</title><path d="M11.754.0A3.998 3.998.0 009.705.596L3.33 4.532A4.252 4.252.0 001.313 8.147v8.03c0 1.473.79 2.838 2.067 3.574l6.486 3.733a3.88 3.88.0 003.835.018l7.043-3.966a3.817 3.817.0 001.943-3.323V7.752a3.57 3.57.0 00-1.774-3.084L13.817.541a3.998 3.998.0 00-2.063-.54zm.022 1.674c.413-.006.828.1 1.2.315l7.095 4.127c.584.34.941.96.94 1.635v8.462c0 .774-.414 1.484-1.089 1.864l-7.042 3.966a2.199 2.199.0 01-2.179-.01l-6.485-3.734a2.447 2.447.0 01-1.228-2.123v-8.03c0-.893.461-1.72 1.221-2.19l6.376-3.935a2.323 2.323.0 011.19-.347zm-4.7 3.844V18.37h2.69v-5.62h4.46v5.62h2.696V5.518h-2.696v4.681h-4.46V5.518z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">Hugo博客</div><p class="dropdown-item-desc mb-0 text-wrap">静态博客网站</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="hi-svg-inline" fill="currentcolor" height="2em" role="img" style="color:#000" viewBox="0 0 24 24" width="2em" xmlns="http://www.w3.org/2000/svg"><title>LeetCode</title><path d="M13.483.0a1.374 1.374.0 00-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266.0 00-1.209 2.104 5.35 5.35.0 00-.125.513 5.527 5.527.0 00.062 2.362 5.83 5.83.0 00.349 1.017 5.938 5.938.0 001.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378.0 00-1.951-.003l-2.396 2.392a3.021 3.021.0 01-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68.0 01.066-.523 2.545 2.545.0 01.619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.94-.207a1.384 1.384.0 00-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384.0 0013.483.0zm-2.866 12.815a1.38 1.38.0 00-1.38 1.382 1.38 1.38.0 001.38 1.382H20.79a1.38 1.38.0 001.38-1.382 1.38 1.38.0 00-1.38-1.382z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">算法笔记</div><p class="dropdown-item-desc mb-0 text-wrap">算法刷题笔记</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/ai%E8%AE%BA%E6%96%87/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-rocketbi bi-rocket hi-svg-inline" fill="currentcolor" height="2em" style="color:#e6492a" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M8 8c.828.0 1.5-.895 1.5-2S8.828 4 8 4s-1.5.895-1.5 2S7.172 8 8 8"/><path d="M11.953 8.81c-.195-3.388-.968-5.507-1.777-6.819C9.707 1.233 9.23.751 8.857.454A3.5 3.5.0 008.394.139 2 2 0 008.25.064.55.55.0 008 0a.55.55.0 00-.266.073 2 2 0 00-.142.08 4 4 0 00-.459.33c-.37.308-.844.803-1.31 1.57-.805 1.322-1.577 3.433-1.774 6.756l-1.497 1.826-.004.005A2.5 2.5.0 002 12.202V15.5a.5.5.0 00.9.3l1.125-1.5c.166-.222.42-.4.752-.57.214-.108.414-.192.625-.281l.198-.084c.7.428 1.55.635 2.4.635s1.7-.207 2.4-.635q.1.044.196.083c.213.09.413.174.627.282.332.17.586.348.752.57l1.125 1.5a.5.5.0 00.9-.3v-3.298a2.5 2.5.0 00-.548-1.562zM12 10.445v.055c0 .866-.284 1.585-.75 2.14.146.064.292.13.425.199.39.197.8.46 1.1.86L13 14v-1.798a1.5 1.5.0 00-.327-.935zM4.75 12.64C4.284 12.085 4 11.366 4 10.5v-.054l-.673.82A1.5 1.5.0 003 12.202V14l.225-.3c.3-.4.71-.664 1.1-.861.133-.068.279-.135.425-.199M8.009 1.073q.096.06.226.163c.284.226.683.621 1.09 1.28C10.137 3.836 11 6.237 11 10.5c0 .858-.374 1.48-.943 1.893C9.517 12.786 8.781 13 8 13s-1.517-.214-2.057-.607C5.373 11.979 5 11.358 5 10.5c0-4.182.86-6.586 1.677-7.928.409-.67.81-1.082 1.096-1.32q.136-.113.236-.18z"/><path d="M9.479 14.361c-.48.093-.98.139-1.479.139s-.999-.046-1.479-.139L7.6 15.8a.5.5.0 00.8.0z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">AI论文</div><p class="dropdown-item-desc mb-0 text-wrap">深度学习论文汇报/笔记</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="hi-svg-inline" fill="currentcolor" height="2em" role="img" style="color:blue" viewBox="0 0 24 24" width="2em" xmlns="http://www.w3.org/2000/svg"><title>OpenAI</title><path d="M22.2819 9.8211a5.9847 5.9847.0 00-.5157-4.9108 6.0462 6.0462.0 00-6.5098-2.9A6.0651 6.0651.0 004.9807 4.1818a5.9847 5.9847.0 00-3.9977 2.9 6.0462 6.0462.0 00.7427 7.0966 5.98 5.98.0 00.511 4.9107 6.051 6.051.0 006.5146 2.9001A5.9847 5.9847.0 0013.2599 24a6.0557 6.0557.0 005.7718-4.2058 5.9894 5.9894.0 003.9977-2.9001 6.0557 6.0557.0 00-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755.0 01-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948.0 00.3927-.6813v-6.7369l2.02 1.1686a.071.071.0 01.038.052v5.5826a4.504 4.504.0 01-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708.0 01-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712.0 00.7806.0l5.8428-3.3685v2.3324a.0804.0804.0 01-.0332.0615L9.74 19.9502a4.4992 4.4992.0 01-6.1408-1.6464zM2.3408 7.8956a4.485 4.485.0 012.3655-1.9728V11.6a.7664.7664.0 00.3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757.0 01-.071.0l-4.8303-2.7865A4.504 4.504.0 012.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757.0 01.071.0l4.8303 2.7913a4.4944 4.4944.0 01-.6765 8.1042v-5.6772a.79.79.0 00-.407-.667zm2.0107-3.0231-.142-.0852-4.7735-2.7818a.7759.7759.0 00-.7854.0L9.409 9.2297V6.8974a.0662.0662.0 01.0284-.0615l4.8303-2.7866a4.4992 4.4992.0 016.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804.0 01-.038-.0567V6.0742a4.4992 4.4992.0 017.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948.0 00-.3927.6813zm1.0976-2.3654 2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">深度学习</div><p class="dropdown-item-desc mb-0 text-wrap">李宏毅课程笔记</p></div></a></li></ul></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto active"><a class="nav-link active" id=header-menu-project href aria-current=page role=button data-bs-toggle=dropdown data-bs-reference=#header-menu-project-submenus aria-expanded=false><div class="nav-link-content d-flex align-items-center"><svg aria-hidden="true" class="bi bi-stackbi bi-stack hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m14.12 10.163 1.715.858c.22.11.22.424.0.534L8.267 15.34a.6.6.0 01-.534.0L.165 11.555a.299.299.0 010-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604.0l5.317-2.66zM7.733.063a.6.6.0 01.534.0l7.568 3.784a.3.3.0 010 .535L8.267 8.165a.6.6.0 01-.534.0L.165 4.382a.299.299.0 010-.535z"/><path d="m14.12 6.576 1.715.858c.22.11.22.424.0.534l-7.568 3.784a.6.6.0 01-.534.0L.165 7.968a.299.299.0 010-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604.0z"/></svg>项目<span class="dropdown-toggle-icon d-flex align-items-center ms-1"><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67"/></svg></span></div></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby=header-menu-project data-columns=2 data-bs-popper=none><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E9%87%8D%E8%AF%86%E5%88%AB/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-camerabi bi-camera hi-svg-inline text-primary" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M15 12a1 1 0 01-1 1H2a1 1 0 01-1-1V6a1 1 0 011-1h1.172a3 3 0 002.12-.879l.83-.828A1 1 0 016.827 3h2.344a1 1 0 01.707.293l.828.828A3 3 0 0012.828 5H14a1 1 0 011 1zM2 4A2 2 0 000 6v6a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1.172a2 2 0 01-1.414-.586l-.828-.828A2 2 0 009.172 2H6.828a2 2 0 00-1.414.586l-.828.828A2 2 0 013.172 4z"/><path d="M8 11a2.5 2.5.0 110-5 2.5 2.5.0 010 5m0 1a3.5 3.5.0 100-7 3.5 3.5.0 000 7M3 6.5a.5.5.0 11-1 0 .5.5.0 011 0"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">行人重识别</div><p class="dropdown-item-desc mb-0 text-wrap">课题组项目person/vessel ReID</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E6%9D%90%E6%96%99%E7%94%9F%E6%88%90/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">材料成分生成</div><p class="dropdown-item-desc mb-0 text-wrap">发明专利</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E8%A7%86%E9%A2%91%E4%BA%BA%E5%83%8F%E5%88%86%E5%89%B2/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-searchbi bi-search hi-svg-inline" fill="currentcolor" height="2em" style="color:8b" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1 1 0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">视频人像分割</div><p class="dropdown-item-desc mb-0 text-wrap">服务外包创新创业大赛全国三等奖</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E5%AE%89%E5%85%A8%E9%A9%BE%E9%A9%B6/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-car-frontbi bi-car-front hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M4 9A1 1 0 112 9a1 1 0 012 0m10 0a1 1 0 11-2 0 1 1 0 012 0M6 8a1 1 0 000 2h4a1 1 0 100-2zM4.862 4.276 3.906 6.19a.51.51.0 00.497.731c.91-.073 2.35-.17 3.597-.17s2.688.097 3.597.17a.51.51.0 00.497-.731l-.956-1.913A.5.5.0 0010.691 4H5.309a.5.5.0 00-.447.276"/><path d="M2.52 3.515A2.5 2.5.0 014.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5.0 01-.5.5h-2a.5.5.0 01-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5.0 01-.5.5h-2a.5.5.0 01-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5.0 01.049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8.0 00.381-.404l.792-1.848zM4.82 3a1.5 1.5.0 00-1.379.91l-.792 1.847a1.8 1.8.0 01-.853.904.8.8.0 00-.43.564L1.03 8.904A1.5 1.5.0 001 9.198v.413c0 .796.62 1.448 1.408 1.484 1.555.07 3.786.155 5.592.155s4.037-.084 5.592-.155A1.48 1.48.0 0015 9.611v-.413q0-.148-.03-.294l-.335-1.68a.8.8.0 00-.43-.563 1.8 1.8.0 01-.853-.904l-.792-1.848A1.5 1.5.0 0011.18 3z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">智能安全驾驶监测系统</div><p class="dropdown-item-desc mb-0 text-wrap">论文著作</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=/%E6%99%BA%E6%85%A7%E8%AF%BE%E5%A0%82/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-book-halfbi bi-book-half hi-svg-inline" fill="currentcolor" height="2em" style="color:7952b3" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">智慧课堂</div><p class="dropdown-item-desc mb-0 text-wrap">中小学学生课堂行为分析系统</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center active" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-rocketbi bi-rocket hi-svg-inline" fill="currentcolor" height="2em" style="color:#dc3545" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M8 8c.828.0 1.5-.895 1.5-2S8.828 4 8 4s-1.5.895-1.5 2S7.172 8 8 8"/><path d="M11.953 8.81c-.195-3.388-.968-5.507-1.777-6.819C9.707 1.233 9.23.751 8.857.454A3.5 3.5.0 008.394.139 2 2 0 008.25.064.55.55.0 008 0a.55.55.0 00-.266.073 2 2 0 00-.142.08 4 4 0 00-.459.33c-.37.308-.844.803-1.31 1.57-.805 1.322-1.577 3.433-1.774 6.756l-1.497 1.826-.004.005A2.5 2.5.0 002 12.202V15.5a.5.5.0 00.9.3l1.125-1.5c.166-.222.42-.4.752-.57.214-.108.414-.192.625-.281l.198-.084c.7.428 1.55.635 2.4.635s1.7-.207 2.4-.635q.1.044.196.083c.213.09.413.174.627.282.332.17.586.348.752.57l1.125 1.5a.5.5.0 00.9-.3v-3.298a2.5 2.5.0 00-.548-1.562zM12 10.445v.055c0 .866-.284 1.585-.75 2.14.146.064.292.13.425.199.39.197.8.46 1.1.86L13 14v-1.798a1.5 1.5.0 00-.327-.935zM4.75 12.64C4.284 12.085 4 11.366 4 10.5v-.054l-.673.82A1.5 1.5.0 003 12.202V14l.225-.3c.3-.4.71-.664 1.1-.861.133-.068.279-.135.425-.199M8.009 1.073q.096.06.226.163c.284.226.683.621 1.09 1.28C10.137 3.836 11 6.237 11 10.5c0 .858-.374 1.48-.943 1.893C9.517 12.786 8.781 13 8 13s-1.517-.214-2.057-.607C5.373 11.979 5 11.358 5 10.5c0-4.182.86-6.586 1.677-7.928.409-.67.81-1.082 1.096-1.32q.136-.113.236-.18z"/><path d="M9.479 14.361c-.48.093-.98.139-1.479.139s-.999-.046-1.479-.139L7.6 15.8a.5.5.0 00.8.0z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">虚拟试衣</div><p class="dropdown-item-desc mb-0 text-wrap">2D-Virtual-TryOn</p></div></a></li></ul></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto"><a class="nav-link pe-0 d-inline-flex align-items-center" href=https://github.com/brainstormYYF/ target=_blank rel=external><svg aria-hidden="true" class="hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 48C141.1 48 48 141.1 48 256v40c0 13.3-10.7 24-24 24S0 309.3.0 296V256C0 114.6 114.6.0 256 0S512 114.6 512 256V400.1c0 48.6-39.4 88-88.1 88L313.6 488c-8.3 14.3-23.8 24-41.6 24H240c-26.5.0-48-21.5-48-48s21.5-48 48-48h32c17.8.0 33.3 9.7 41.6 24l110.4.1c22.1.0 40-17.9 40-40V256c0-114.9-93.1-208-208-208zM144 208h16c17.7.0 32 14.3 32 32V352c0 17.7-14.3 32-32 32H144c-35.3.0-64-28.7-64-64V272c0-35.3 28.7-64 64-64zm224 0c35.3.0 64 28.7 64 64v48c0 35.3-28.7 64-64 64H352c-17.7.0-32-14.3-32-32V240c0-17.7 14.3-32 32-32h16z"/></svg>支持</a>
<a class="nav-link ps-0 d-inline-flex" href=# id=header-menu-support role=button data-bs-toggle=dropdown aria-expanded=false><span class=visually-hidden>Toggle Dropdown</span><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67"/></svg></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby=header-menu-support data-bs-popper=none><li class=column-span-all><a class="hb-header-submenu dropdown-item d-flex align-items-center" href=https://github.com/brainstormYYF target=_blank rel=external><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 496 512" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></div><div class=dropdown-item-content><div class="dropdown-item-title mb-1">GitHub</div><p class="dropdown-item-desc mb-0 text-wrap">代码仓库。</p></div></a></li></ul></li></ul><ul class="hb-header-panel navbar-nav flex-row flex-wrap"><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><hr class="d-lg-none my-2 text-body-50"></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href=https://github.com/brainstormYYF target=_blank rel="nofollow me" title=GitHub><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
<span class="hb-social-text d-lg-none ms-1">GitHub</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href=https://github.com/sponsors/brainstormYYF target=_blank rel="nofollow me" title=Githubsponsors><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>GitHub Sponsors</title><path d="M17.625 1.499c-2.32.0-4.354 1.203-5.625 3.03-1.271-1.827-3.305-3.03-5.625-3.03C3.129 1.499.0 4.253.0 8.249c0 4.275 3.068 7.847 5.828 10.227a33.14 33.14.0 005.616 3.876l.028.017.008.003-.001.003c.163.085.342.126.521.125.179.001.358-.041.521-.125l-.001-.003.008-.003.028-.017a33.14 33.14.0 005.616-3.876C20.932 16.096 24 12.524 24 8.249c0-3.996-3.129-6.75-6.375-6.75zm-.919 15.275a30.766 30.766.0 01-4.703 3.316l-.004-.002-.004.002a30.955 30.955.0 01-4.703-3.316c-2.677-2.307-5.047-5.298-5.047-8.523.0-2.754 2.121-4.5 4.125-4.5 2.06.0 3.914 1.479 4.544 3.684.143.495.596.797 1.086.796.49.001.943-.302 1.085-.796.63-2.205 2.484-3.684 4.544-3.684 2.004.0 4.125 1.746 4.125 4.5.0 3.225-2.37 6.216-5.048 8.523z"/></svg>
<span class="hb-social-text d-lg-none ms-1">Githubsponsors</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href=https://www.zhihu.com/people/yao-yi-feng-36-79 target=_blank rel="nofollow me" title=知乎><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"/></svg>
<span class="hb-social-text d-lg-none ms-1">知乎</span></a></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-body"></div><hr class="d-lg-none my-2 text-body-50"></li><li class="theme-toggle nav-item dropdown col-6 col-lg-auto d-flex flex-column justify-content-start justify-content-lg-center"><button class="btn btn-link btn-theme-toggle nav-link py-2 px-0 px-lg-2 d-flex justify-content-start justify-content-lg-center align-items-center" data-style=switch aria-expanded=false title=主题>
<svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1 theme-toggle-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"/></svg>
<span class="d-lg-none ms-1 theme-name">主题</span></button><ul class="theme-toggle-menu dropdown-menu dropdown-menu-end"><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name=自动 data-bs-theme-value=auto>
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"/></svg>
</span>自动</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name=暗色 data-bs-theme-value=dark>
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-moon-starsbi bi-moon-stars hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.77.77.0 01.08.858 7.2 7.2.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79.0 01.81.316.73.73.0 01-.031.893A8.35 8.35.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.75.75.0 016 .278M4.858 1.311A7.27 7.27.0 001.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.32 7.32.0 005.205-2.162q-.506.063-1.029.063c-4.61.0-8.343-3.714-8.343-8.29.0-1.167.242-2.278.681-3.286"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.73 1.73.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.73 1.73.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.73 1.73.0 001.097-1.097zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.16 1.16.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.16 1.16.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732z"/></svg>
</span>暗色</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name=亮色 data-bs-theme-value=light>
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-brightness-highbi bi-brightness-high hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 11a3 3 0 110-6 3 3 0 010 6m0 1a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0m9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708"/></svg>
</span>亮色</button></li></ul></li></ul></div></div></div></nav></header><div class="hb-main container-fluid"><div class=hb-docs><div class=hb-docs-sidebar tabindex=-1 data-bs-hide=focusout><div class="hb-docs-nav offcanvas-lg pe-lg-2 offcanvas-start" aria-labelledby=hb-docs-nav-label><div class="offcanvas-header border-bottom"><h5 class=offcanvas-title id=hb-docs-nav-label>浏览文档</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close data-bs-target=.hb-docs-nav></button></div><div class="offcanvas-body flex-column text-body-secondary"><ul class="hb-docs-nav-links list-unstyled hb-module"><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E8%B5%9B%E9%A2%98%E8%A6%81%E6%B1%82/>赛题要求</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D/>项目介绍</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E8%A7%86%E9%A2%91%E7%AE%80%E4%BB%8B/>视频简介</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded active" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E9%A1%B9%E7%9B%AE%E8%AF%A6%E7%BB%86%E6%96%B9%E6%A1%88/>项目详细方案</a></li><li class=hb-docs-nav-links-span-all><a class="hb-docs-nav-link d-flex align-items-center rounded" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E6%88%90%E6%9E%9C%E7%BD%91%E7%AB%99/>成果网站</a></li></ul></div></div></div><div class=hb-docs-main><div class="container-fluid px-0 mb-4"><nav aria-label=breadcrumb><ol class="hb-breadcrumb breadcrumb"><li class=breadcrumb-item><a href=/ title="Yifeng's blog"><svg aria-hidden="true" class="bi bi-housebi bi-house hi-svg-inline me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8.707 1.5a1 1 0 00-1.414.0L.646 8.146a.5.5.0 00.708.708L2 8.207V13.5A1.5 1.5.0 003.5 15h9a1.5 1.5.0 001.5-1.5V8.207l.646.647a.5.5.0 00.708-.708L13 5.793V2.5a.5.5.0 00-.5-.5h-1a.5.5.0 00-.5.5v1.293zM13 7.207V13.5a.5.5.0 01-.5.5h-9a.5.5.0 01-.5-.5V7.207l5-5z"/></svg>主页</a></li><li class=breadcrumb-item><a href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/ title=虚拟试衣>虚拟试衣</a></li><li class="breadcrumb-item active" aria-current=page><a href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E9%A1%B9%E7%9B%AE%E8%AF%A6%E7%BB%86%E6%96%B9%E6%A1%88/ title=项目详细方案>项目详细方案</a></li></ol></nav></div><div class=hb-docs-doc><div class="hb-docs-doc-intro hb-module"><h1 class=mb-3>项目详细方案</h1><div class="hb-blog-post-meta hb-docs-doc-meta mb-3"><span class=hb-docs-doc-date>2024年2月27日</span>
<span class=hb-blog-post-reading-time>8 分钟阅读</span></div></div><div class="hb-docs-doc-toc ps-lg-3 text-body-secondary"><div class="hb-module pb-1"><div class="h6 d-none d-md-block">本页内容</div><hr class="d-none d-md-block"><div class="d-grid d-block d-md-none mb-2"><button class="btn btn-light d-flex align-items-center justify-content-between collapsed" type=button data-bs-toggle=collapse data-bs-target=.hb-docs-doc-toc-collapse aria-expanded=false aria-controls=collapse-toc>
<span>本页内容</span><svg aria-hidden="true" class="bi bi-chevron-expandbi bi-chevron-expand hi-svg-inline ms-2" fill="currentcolor" height="1.25rem" viewBox="0 0 16 16" width="1.25rem" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3.646 9.146a.5.5.0 01.708.0L8 12.793l3.646-3.647a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 010-.708m0-2.292a.5.5.0 00.708.0L8 3.207l3.646 3.647a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 000 .708"/></svg></button></div><div class="px-2 px-md-0"><div id=collapse-toc class="collapse hb-docs-doc-toc-collapse"><nav id=TableOfContents><ul><li><a href=#1-引言>1 引言</a></li><li><a href=#2-项目概述>2 项目概述</a><ul><li><a href=#21-项目背景>2.1 项目背景</a></li><li><a href=#22-项目目标>2.2 项目目标</a></li><li><a href=#23-项目价值>2.3 项目价值</a></li><li><a href=#24-作品简介>2.4 作品简介</a></li><li><a href=#25-创新点与优势>2.5 创新点与优势</a></li></ul></li><li><a href=#span-stylebackgroundfff88f3-系统设计span><span style=background:#fff88f>3 系统设计</span></a></li><li><a href=#4-模型架构>4 模型架构</a><ul><li><a href=#41-相关工作>4.1 相关工作</a><ul><li><a href=#411-虚拟试衣技术的发展历史>4.1.1 虚拟试衣技术的发展历史</a></li><li><a href=#412-空间变换模块>4.1.2 空间变换模块</a></li><li><a href=#413-注意力机制>4.1.3 注意力机制</a></li></ul></li><li><a href=#span-stylebackgroundfff88f42-模型总体架构span><span style=background:#fff88f>4.2 模型总体架构</span></a></li><li><a href=#span-stylebackgroundfff88f43-学生模型sdafn_plus分析span><span style=background:#fff88f>4.3 学生模型SDAFN_plus分析</span></a><ul><li><a href=#431-金字塔特征提取器>4.3.1 金字塔特征提取器</a></li><li><a href=#432-级联流估计>4.3.2 级联流估计</a></li><li><a href=#433-浅编码器与解码器>4.3.3 浅编码器与解码器</a></li></ul></li><li><a href=#44-模型训练>4.4 模型训练</a><ul><li><a href=#441-训练平台>4.4.1 训练平台</a></li><li><a href=#442-数据集>4.4.2 数据集</a></li><li><a href=#443-训练过程>4.4.3 训练过程</a></li></ul></li></ul></li><li><a href=#5-工程化实现>5 工程化实现</a><ul><li><a href=#span-stylebackgroundfff88f51-工程化实现的整体框架span><span style=background:#fff88f>5.1 工程化实现的整体框架</span></a></li><li><a href=#52-模型转换>5.2 模型转换</a><ul><li><a href=#521-pth模型的后处理>5.2.1 pth模型的后处理</a></li><li><a href=#522模型的导出>5.2.2模型的导出</a></li><li><a href=#523-导出代码>5.2.3 导出代码</a></li><li><a href=#span-stylebackgroundfff88f524-bug修复span><span style=background:#fff88f>5.2.4 Bug修复</span></a></li></ul></li><li><a href=#53-模型量化>5.3 模型量化</a><ul><li><a href=#531-fp16量化>5.3.1 Fp16量化</a></li><li><a href=#532-int8量化>5.3.2 Int8量化</a></li></ul></li><li><a href=#54-模型推断>5.4 模型推断</a></li></ul></li><li><a href=#6-模型部署>6 模型部署</a><ul><li><a href=#61-web部署整体框架图>6.1 web部署整体框架图</a></li><li><a href=#62-web前端部署>6.2 web前端部署</a><ul><li><a href=#621-目录结构与文件>6.2.1 目录结构与文件</a></li><li><a href=#622-项目构建与打包>6.2.2 项目构建与打包</a></li></ul></li><li><a href=#63-web后端部署>6.3 web后端部署</a></li><li><a href=#64-项目服务器环境部署>6.4 项目服务器环境部署</a></li></ul></li><li><a href=#span-stylebackgroundfff88f7-模型测试span><span style=background:#fff88f>7 模型测试</span></a><ul><li><a href=#71-实际效果图展示>7.1 实际效果图展示</a></li><li><a href=#72-评价指标>7.2 评价指标</a></li><li><a href=#73-模型大小分析>7.3 模型大小分析</a></li><li><a href=#74-推理速度分析>7.4 推理速度分析</a></li></ul></li><li><a href=#8-项目总结>8 项目总结</a><ul><li><a href=#81-团队简介与团队文化>8.1 团队简介与团队文化</a><ul><li><a href=#811-团队简介>8.1.1 团队简介</a></li><li><a href=#812-团队文化>8.1.2 团队文化</a></li></ul></li><li><a href=#82-项目规划>8.2 项目规划</a><ul><li><a href=#821-进度计划>8.2.1 进度计划</a></li><li><a href=#822-开发文档管理>8.2.2 开发文档管理</a></li><li><a href=#823-团队分工>8.2.3 团队分工</a></li></ul></li><li><a href=#83项目总结>8.3项目总结</a></li></ul></li><li><a href=#9-参考文献>9 参考文献</a></li></ul></nav></div></div></div></div><div class=hb-docs-doc-main><div class="hb-docs-doc-content hb-module" data-bs-spy=scroll data-bs-target=#TableOfContents><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271801661.webp?width=400#center" alt loading=lazy width=400></picture></p><h2 id=1-引言>1 引言</h2><p>随着元宇宙概念的火爆以及虚拟数字技术的大迸发，在人们购买力逐步上升的今天，世界看到了“虚拟试衣”技术未来巨大的发展空间。根据 CB Insights 的预测，全球虚拟试衣间的市场规模将从 2020 年的 34 亿美元，增长至 2030 年的 193 亿美元。</p><p>虚拟试衣技术在不断地发展中和突破中，在电子商业普及和移动端用户迅速增长的阶段，如果虚拟试衣系统能提高其真实性以及对不同衣物的贴合度，将在网络时代获得巨大的市场。基于赛题方要求，我们团队开发了符合要求的虚拟试衣系统。下文中，我们将会从项目概述，系统设计，模型构建，工程化实现，项目部署，测试效果等多个维度对于相关成果进行阐述。</p><ul><li><p>项目概述：介绍了当前虚拟试衣技术出现的背景与市场需求，强调了我们的虚拟试衣系统的主要功能和特点，给出了赛题方要求的技术指标。</p></li><li><p>系统设计：介绍了我们的系统架构和技术选择。</p></li><li><p>模型构建：详细介绍了我们使用的算法和模型，以及如何进行训练和调优。</p></li><li><p>工程化实现：详细介绍了如何将深度学习算法转化为实际可用的系统，并通过推理引擎将PyTorch深度学习模型进行工程化。</p></li><li><p>项目部署：详细介绍了我们们如何将系统部署到实际的生产环境中（web服务器端部署和本地化可执行程序exe部署）。</p></li><li><p>测试效果：展示了我们模型的生成效果图，与其他SOTA模型的对比，同时分析了我们模型的大小和推导速度</p></li></ul><h2 id=2-项目概述>2 项目概述</h2><h3 id=21-项目背景>2.1 项目背景</h3><p>随着互联网和移动互联网的飞速发展，电子商务已成为消费者购买商品的主要方式之一。然而，网络购物的一个主要难题是消费者无法亲身试穿商品，往往需要通过图片和文字描述来评估商品的适合度。这会导致消费者难以确定最终购买的商品是否符合自己的需求，从而增加了商品退换货的风险和成本，也降低了购物的满意度。</p><p>虚拟试衣技术的出现，为解决这一难题提供了一种新的解决方案。虚拟试衣技术可以通过图像生成和人体建模技术，利用计算机生成的模型将服装或配饰实时渲染到用户的图像或视频中，让用户可以在不离开家的情况下进行试穿。这不仅提高了用户体验，还减少了用户试穿时的不便和时间成本，为消费者带来更加便利的购物体验。同时，虚拟试衣技术还可以为品牌商和零售商提供一种更直观的方式来展示其商品，增强品牌的吸引力和销售力。虚拟试衣技术已经成为了时尚行业数字化的重要一步，它将为时尚品牌和电商平台带来更多的机会和创新可能性，也将为用户提供更好的购物体验和更加便利的服务。随着技术的不断进步和应用场景的不断拓展，相信虚拟试衣技术将在未来继续发挥着重要的作用，并成为时尚行业数字化发展的重要驱动力。</p><p>经过团队的实际调研，可以将虚拟试衣应用出现的原因归结如下：</p><ul><li><p>顾客需求的提升：随着消费者对服装试穿的体验要求不断提升，虚拟试衣技术能够满足消费者更高的购物体验需求。此外，随着在线购物市场的迅速发展，虚拟试衣技术的应用越来越广泛。</p></li><li><p>技术突破的加速：随着深度学习、计算机视觉的不断发展，虚拟试衣技术在真实性、贴合度、逼真度等方面得到了极大提升，也推动了虚拟试衣技术的广泛应用。</p></li><li><p>环保和可持续性：虚拟试衣技术可以避免过多的实体试衣，减少了物流和生产环节的能耗和浪费，符合现代社会对于环保和可持续发展的要求。</p></li><li><p>降低成本和提高效率：虚拟试衣技术可以降低实体试衣的成本，同时提高试衣效率，为服装企业和消费者带来了实际效益和收益。</p></li></ul><p>同时，我们团队还对虚拟试衣项目市场规模进行了调研。根据多个市场研究报告显示，预计到2024年，全球虚拟试衣市场规模将超过100亿美元。随着虚拟试衣技术的不断提升和推广，虚拟试衣方案的普及将越来越广泛，吸引不断增长的消费者需求。特别是在线购物日益成为主流趋势，虚拟试衣的需求将会不断增加。下图展示了近几年虚拟试衣市场规模的统计数据：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271752674.webp?width=500#center" alt loading=lazy width=500></picture></p><p><strong>图 2-1 近年全球虚拟试衣市场规模</strong></p><h3 id=22-项目目标>2.2 项目目标</h3><p>虚拟试衣项目的目标是为消费者提供一种更加方便和快捷的购物体验，使其能够在不实际去实体店试穿的情况下，轻松地预览和比较不同的服装款式，颜色和尺寸。虚拟试衣旨在改善在线购物的用户体验，同时减少物流和退货的成本，促进线上消费的增长。此外，虚拟试衣也有助于品牌提高消费者对其产品的信任度和忠诚度，改善品牌形象和增加销售量。</p><p>为了实现以上目标，团队根据万兴科技关于选题和项目说明对项目需求和系统的规格说明进行了详细的分析，我们认为该项目应该满足以下几点功能：</p><ul><li><p>上传用户照片：系统应该允许用户上传自己的照片以进行试衣。</p></li><li><p>选择服装：系统中应该有可供用户选择的多种服装选项。</p></li><li><p>尺寸适配：系统应该根据用户的身形和尺寸来对所选的服装进行适配，确保合适的紧度和长度。</p></li><li><p>预览和变更：用户应该能够根据自己的需求预览和变更服装。</p></li></ul><p>此外，考虑到项目在现实中的实际应用，除了基本功能外，还应满足以下的用户需求：</p><ul><li><p>可视化体验：用户能够在虚拟试衣系统中看到自己穿着不同款式、不同颜色的衣服，从而更好地理解服装的搭配和效果。</p></li><li><p>真实感：虚拟试衣系统应具有尽可能真实的材质、光影等元素，从而给用户带来真实的试衣体验。</p></li><li><p>多样性：系统应提供丰富多样的衣服选择，包括各种品牌、风格、颜色等，以满足不同用户的需求。此外，还应提供个性化定制服装的功能。</p></li><li><p>操作简单：虚拟试衣系统应该操作简单、易懂，不需要太多的学习成本，以便吸引更多用户使用。</p></li><li><p>交互性：系统应该便于用户进行交互，例如可以在系统中分享图片、保存购物清单等等。</p></li><li><p>安全性：虚拟试衣系统应该提供足够的保密措施，以保护用户的隐私。</p></li><li><p>精确性：虚拟试衣系统应该提供准确的尺寸和尺寸建议，以帮助用户选择合适的衣服。</p></li><li><p>灵活性：虚拟试衣系统应该提供灵活的体验方式，例如可以在家中进行试衣、在商店中进行试衣等等，以满足不同用户的需求。</p></li></ul><h3 id=23-项目价值>2.3 项目价值</h3><p>虚拟试衣项目是近年来发展迅速的一项技术，它将人工智能、计算机视觉和虚拟现实等多种技术有机结合，在传统试衣的基础上实现了更加快速、准确和便捷的试衣体验。下文将从市场，社会，国家三个层面对项目价值进行具体分析：</p><ul><li><p>市场层面：</p><p>虚拟试衣技术为时尚、服装、珠宝等行业提供了一种全新的销售方式，可以为企业吸引更广泛、更具有世界性的客户群体，从而提高企业的市场份额和竞争力。通过应用虚拟试衣技术，消费者可以在不离开家的情况下进行试衣。这意味着公司的客户群可能会变得更广泛、更有世界性。虚拟试衣技术有助于增强品牌形象，提高客户对品牌的信赖度和忠诚度。</p></li><li><p>社会层面：</p></li></ul><p>虚拟试衣技术有助于推动时尚行业的数字化转型，减少人们购买衣物时的误解和失望，让购物变得更加智能化、更加精准化。同时，虚拟试衣技术可以减少生产与销售过程中的资源浪费，从而有助于推动可持续发展和环境保护。</p><ul><li>国家层面：</li></ul><p>虚拟试衣技术可以为国家的制造业、资讯科技方向带来经济利益。这种技术有帮助推动产业升级，从而增加了经济增长的可能性，并且在工业4.0时代，虚拟试衣技术有助于技术创新，促进了数字经济的发展。同时，虚拟试衣技术和智能制造技术结合，将产生更广泛的商业机遇，缓解人力资源短缺问题，更好地推进制造业转型升级。</p><h3 id=24-作品简介>2.4 作品简介</h3><p>团队使用开源数据集VITON及在此基础上进行预处理得到的VITON_plus数据集，建立虚拟试衣算法模型，并完成模型训练、优化、工程化、部署等工作，最终产出一个本地可执行程序以及部署在服务器支持试用的Web界面(可通过此链接访问我们的网页：无忧工作室)，同时测试了模型性能以及对模型的试穿效果进行了评估。值得关注的是，基于赛题方的要求，我们的模型是端到端的，只需要将人的图像和衣服的图像作为输入，而不需要人体解析图或人体姿态图等任何额外的辅助信息就可以完成虚拟试衣，具有轻量化且快速的特点，且生成效果良好。</p><p>以下是Web页面展示图：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753365.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 2-2 项目前端首页面展示</strong></p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753028.webp?width=600#center" alt=7656da8df12b4cd472cf13d4bf11bda loading=lazy width=600></picture></p><p><strong>图 2-3 项目前端试衣页面展示</strong></p><p>以下是本地化可执行程序的展示图（本地化可执行程序可以在web网页的软件下载获取）：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753829.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 2-4 项目本地化可执行程序展示</strong></p><table><thead><tr><th><strong>模型大小（MB）</strong></th><th><strong>计算量（FLOPs）</strong></th><th><strong>参数量（MB）</strong></th><th><strong>FID</strong></th></tr></thead><tbody><tr><td>34.75</td><td>2.02*10^9</td><td>18.22</td><td>8.75</td></tr></tbody></table><p><strong>表 2-1 赛题方所需模型数据（模型精度格式为fp16）</strong></p><p>此外我们的在项目开发的过程中尤其注重文档工作，构建了语雀知识库来进行开发过程的跟踪，通过知识库协作来进行团队合作与任务分配，完成了需求分析，算法调研，工程化探索，web开发的代码文档等工作。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753630.webp?width=600#center" alt=3a7f4c27f9cee47e28cdafab8f811d5 loading=lazy width=600></picture></p><p><strong>图 2-5 团队语雀知识库截图展示</strong></p><h3 id=25-创新点与优势>2.5 创新点与优势</h3><p><span style=background:#fff88f>模型主要是基于PF-AFN（Parser Free Appearence Flow Network）与SDAFN（Single Deformable Attention Flows Network）实现。</span></p><div class="alert alert-info clearfix" role=alert><div class=float-start><svg aria-hidden="true" class="bi bi-info-circle-fillbi bi-info-circle-fill hi-svg-inline alert-icon me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 16A8 8 0 108 0a8 8 0 000 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194.0.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703.0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 110-2 1 1 0 010 2"/></svg></div><div class=alert-content>对于PF-AFN，我们借鉴了其中知识蒸馏的思想<br>对于SDAFN，我们使用SDAFN作为我们的教师模型</div></div><p><span style=background:#fff88f>其中，对于PF-AFN，我们借鉴了其中知识蒸馏的思想</span>，将教师模型（Teacher Model）的输出作为一种指导信息（tutorial），让学生模型自行选择哪部分应该使用。将最初的人的图像作为真值，而将教师输出作为学生的输入，而非用教师的结果约束学生，实现教师指导学生（Teacher tutor Student）的知识蒸馏架构。教师模型使用到了人体掩码和人体姿态信息，结果会更准确，为了把这些信息传授给学生，教师+学生串联起来，实现了端到端的自监督。这样就将一个大型、复杂的神经网络模型（教师模型）中的知识迁移到一个小型、简单的神经网络模型（学生模型），减小了模型参数，同时实现了学生模型的输入只需要人物和衣服的图片，而不需要依赖任何人体解析图或者人体姿态图等任何辅助信息，且学生模型的效果不受限于教师模型；</p><p><span style=background:#fff88f>对于SDAFN，我们使用SDAFN作为我们的教师模型</span>。同时我们利用其One-Stage框架的创新性构想，借鉴了其外观估计流Appearance Flow的思想（DAFlow），使用了可形变transformer（deformable transformer）做为外观估计流的主要架构，同时改进了深层特征提取器和输入输出模块，提出了SDAFN_plus作为我们学生模型的架构。值得一提的是，DAFlow是利用人和服装图像的自形变和交叉形变注意力流获得输出结果，以端到端的方式达到逼真的拟合结果。</p><p>模型创新点如下：</p><ol><li><p><span style=background:#fff88f>我们的模型为端到端单任务模型，避免了多任务模型计算开销大的缺点，加快了推导速度。</span></p></li><li><p><span style=background:#fff88f>我们的模型不需要依赖人体解析图，人体姿态估计图等任何辅助信息，只需要将人的图片和衣服的图片作为输入。</span></p></li></ol><p>（3）使用知识蒸馏的方法，我们的模型在保持高质量虚拟试衣图像生成的同时，减少了模型计算量和参数量，实现了模型轻量化。</p><p>（4）团队通过数据增强的方式，扩充了模型训练的数据集，提高了模型的鲁棒性。</p><p>（5）模型性能优异，在FID等关键指标中取得领先得分，并在衣物细节保留、人物身体拟合和边缘识别等传统虚拟试衣难点取得较好表现。</p><h2 id=span-stylebackgroundfff88f3-系统设计span><span style=background:#fff88f>3 系统设计</span></h2><p>项目主要分为三部分，分别是深度虚拟试衣模型的构建与训练，pytorch深度学习模型的工程化，模型的生产部署。下面是我们的系统整体架构图。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753804.webp?width=500#center" alt=275e7a465cd381928e79f240c82a2bd loading=lazy width=500></picture></p><p><strong>图 3-1 系统总体架构图</strong></p><p>项目系统架构分析：</p><ul><li><p>深度虚拟试衣模型的构建：使用pytorch作为我们深度虚拟试衣模型的开发框架，使用开源的SDAFN模型（Single Deformable Attention Flows Network）作为我们的教师模型，重新设计构建SDAFN_plus作为我们的学生模型。</p></li><li><p>训练教师模型：使用开源的VITON数据集作为我们的主要训练数据，对VITON数据集进行预处理得到人像掩码图和人体姿势图，再加上试穿衣服图片作为教师模型的输入。</p></li><li><p>训练学生模型：将教师模型的输出作为我们学生模型的输入，将最初的人的图像作为真值，这样就将一个无监督的模型的训练巧妙地转换成了一个有监督的训练，且学生模型的生成效果不会受限于教师模型。</p></li><li><p>学生模型训练完成后，将学生模型的权重保存为.pth。</p></li><li><p>将.pth格式的模型转换成onnx格式。</p></li><li><p>使用onnxruntime推理引擎进行推导，实现推导程序。</p></li><li><p>Web前后端部署：使用Flask作为后端框架，将Python推导程序部署到Web应用程序中。前端使用Vue框架实现用户交互和页面展示。后端使用Gunicorn容器，前端使用Nginx容器来提高Web应用程序的性能和稳定性。</p></li><li><p>本地化可执行程序exe部署：使用Thinker这个Python的可视化库，将Python推导程序封装为本地可执行程序。用户可以通过双击可执行文件来打开程序，不需要安装Python环境和其他依赖库。</p></li></ul><h2 id=4-模型架构>4 模型架构</h2><h3 id=41-相关工作>4.1 相关工作</h3><p>我们团队在项目开展初期对虚拟试衣技术进行了充分的调研，阅读了大量的技术综述与参考文献，对虚拟试衣技术的发展路径有了详细的了解，并对当前效果出众或者在虚拟试衣技术上具有里程碑意义的论文进行了阅读和讨论，下面是我们早期技术调研、论文阅读的任务分配截图和论文阅读笔记截图。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753520.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 4-1</strong></p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753537.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 4-2</strong></p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753087.webp?width=700#center" alt loading=lazy width=700></picture></p><p><strong>图 4-3</strong></p><h4 id=411-虚拟试衣技术的发展历史>4.1.1 虚拟试衣技术的发展历史</h4><p>在线时装行业已经受到诸如增强现实，虚拟现实，可穿戴技术和互联试衣间等最新技术创新的影响。无论是用于创建新产品目录还是为购物者提供沉浸式环境，它都可能影响电子商店并为新的易于图像编辑的可能性打开大门。</p><p><span style=background:#fff88f>在早期，相关工作的处理主要使用三维测量和基于模型的方法</span>，例如2012年的DRAPE: DRessing Any PErson ，2014年的Subspace Clothing Simulation Using Adaptive Bases，2017年的。然而，它们本质上是计算密集型的并且需要昂贵的成本，这对于购物者而言通常是不可接受的。而利用图像合成技术则可以降低零售商的成本。在计算机视觉中，图像生成模型（例如2014年的GAN，2016 年的PixelDTGAN等）能够生成高质量的真实感图像，已成功应用于众多应用中。</p><p><span style=background:#fff88f>近年来，二维方法由于数据容易获取和结果逼真而受到越来越多的关注</span>。例如2017年的有条件的类比GAN：在人像上时尚换装（CAGAN），2018年的VITON：基于映像的虚拟试穿网络，VITON使用了一个两阶段的从粗到细的策略来产生一个穿衣服的人。它首先估计粗糙的人体形状，然后用形状上下文匹配算法扭曲衣服，并根据形状细化穿衣服的人的细节。VITON同年提出来的的改进版Toward Characteristic-Preserving Image-based Virtual Try-On Network（CP-VTON），引入了卷积几何匹配器（用于几何匹配的卷积神经网络架构，2017）。2019年的Towards Multi-pose Guided Virtual Try-on Network（MG-VTON ），扩展到多姿势试穿系统，该系统需要修改人的姿势以及上身的衣服。CAGAN （有条件的类比GAN：在人像上时尚换装）提出了一种基于U-Net的GAN 方法。但是，由于这些网络无法处理较大的空间变形，因此这些方法无法产生实际的结果。大多数的试穿方法都是基于单个图像的，不过也有基于视频的虚拟试穿，例如2019年的FW-GAN: Flow-navigated Warping GAN for Video Virtual Try-on。ACGPN引入了一个额外的阶段来预测参考图像的语义布局。DCTON和ZFlow添加了更准确的描述符号，如变性或UV投影。VITON-HD提高了条件GAN结构在高分辨率图像上的性能。虽然生成的图像质量更好，但管道正变得越来越复杂，并依赖于更多的外部信息，导致了效率的降低和由不准确的中间标签造成的明显的伪影。</p><p><span style=background:#fff88f>传统的基于深度学习的2d虚拟试衣的算法</span>，例如鼻祖VITON，以及后续的CPVITON，ACGPN等，<span style=background:#fff88f>大多依赖于人体解析（human parsing）</span>，也就是算法不仅仅需要待穿着的人的图像，还需要对该人进行各个部位的语义分割或者关键点提取的结果，ACGPN就是其中一个典型的例子。我们最希望的是，一个模型只需要输入目标衣服和候选人，直接输出换装结果，或者说，<span style=background:#fff88f>我们希望得到一个无需人体解析（Parser- Free，下文中使用）的模型</span>。WUTON是Parser-Free模型中的一个经典案例，该模型使用了知识蒸馏（knowledge distillation）的方法，知识蒸馏实际上就是用教师模型（teacher model）的结果监督学生模型（student model）的过程，可以实现教师模型的知识复制到学生模型上的功能。WUTON的教师模型的输入包含目标衣服，待换装的人以及人的解析结果，而学生模型的输入只有目标衣服和待换装的人，用教师模型的输出作为真值约束学生模型的训练过程，就是WUTON的主要思想。2021年的PF-AFN则认为教师模型的输出是不适合作为真值的，因为这只是一个生成的虚拟的结果，可能存在局部的偏差或不自然，因此，更换了思路，将教师模型的输出作为一种指导信息（tutorial），自行选择哪部分应该使用。将最初的人的图像作为真值，而将教师输出作为学生的输入，而非用教师的结果约束学生，实现教师指导学生（teacher tutor student）的知识蒸馏架构，这样学生模型的生成效果不会受限于教师模型，大大提高了学生模型的性能。</p><h4 id=412-空间变换模块>4.1.2 空间变换模块</h4><p>空间变换模块广泛地应用于光流估计、图像变换和目标识别任务中。在虚拟试衣中，空间转换模块主要用于使衣服匹配人的姿势。</p><ul><li><p>VITON 利用基于薄板样条（TPS）的翘曲方法，使店内服装的变形达到更为精细的效果；</p></li><li><p>CP-VTON使用一个神经网络来学习TPS扭曲的变换参数，而不是使用图像描述符；</p></li><li><p>ClothFlow通过级联的方式引入了更密集的流预测，这使得变形的自由度更高。然而，密集流往往不够平滑。为了避免这个问题，ClothFlow使用正则化来强制平滑；</p></li><li><p>PFAPN则增加了一个二阶光滑约束，以实现相邻外观流的共线性，尽管提出这些约束条件是为了使服装在变形后更平滑，但模型当目标衣服与原来的衣服存在较大差异时，模型性能仍有待提高。</p></li></ul><h4 id=413-注意力机制>4.1.3 注意力机制</h4><p>注意力机制是一种计算机视觉和自然语言处理中广泛应用的机制，在词句预测，机器翻译，图像分割、目标检测和图像生成等方面都取得了良好的性能，它可以在输入序列中寻找与输出相关的部分，以便更好地进行特征提取。在深度学习模型中，常常使用自注意力机制来建模序列间或像素点间的长距离依赖关系，其中每个输入元素都被视为其他元素的参考点。</p><p>然而在图像领域中，随着分辨率的提高，计算量爆炸性增加，密集的注意力机制变得难以实现。为了解决这个问题，研究人员通常使用预定义的局部注意力模式或稀疏注意力模式。在像素级图像变换中，团队在模型设计时结合了流操作对保留细节的有效性和注意力机制对精确结构估计的能力，自然而然地将稀疏注意力模式扩展到像素级图像变换中。</p><h3 id=span-stylebackgroundfff88f42-模型总体架构span><span style=background:#fff88f>4.2 模型总体架构</span></h3><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753793.webp?width=650#center" alt=16dd7cdc007007794979926bb33d7e6 loading=lazy width=650></picture></p><p><strong>图 4-4 模型总体架构图</strong></p><p>现有的的虚拟试衣模型在生成真实的结果和细节方面取得了较大进展。然而，这仍是一项具有挑战性的任务，特别是在人体姿态复杂以及生成的图像与原有图像存在较大变形的情况下，大多数现有方法仍然存在错位或明显的生成痕迹，并且高质量虚拟试衣图像的生成相当多的依赖于人体解析图或者人体姿势图，如果人体解析图或者人体姿态图有误，生成质量会大大折扣，并且由于人体解析图或人体姿势图的引入，解析人体的预处理时间也会给生成速度带来不小挑战，多阶段的生成也会加大工程部署的难度，为虚拟试衣技术的真正应用带来挑战。为解决以上问题，我们团队设计了基于SDAFN与PF-AFN的虚拟试衣系统。</p><p><span style=background:#fff88f>我们借鉴PF-AFN中中知识蒸馏的思想，将教师模型（Teacher Model）的输出作为一种指导信息（tutorial），让学生模型自行选择哪部分应该使用</span>。将最初的人的图像作为真值，而将教师输出作为学生的输入，而非用教师的结果约束学生，实现教师指导学生（teacher tutor student）的知识蒸馏架构。教师模型使用到了人体掩码和人体姿态信息，结果会更准确，为了把这些信息传授给学生，教师+学生串联起来，实现了端到端的自监督。这样就将一个大型、复杂的神经网络模型（教师模型）中的知识迁移到一个小型、简单的神经网络模型（学生模型），减小了模型参数，同时实现了学生模型的输入只需要人物和衣服的图片，而不需要依赖任何人体解析图或者人体姿态图等任何辅助信息，且学生模型的效果不受限于教师模型；</p><p><span style=background:#fff88f>对于SDAFN，我们使用SDAFN作为我们的教师模型</span>。同时我们利用其One-Stage框架的创新性构想，借鉴了其外观估计流appearance flow的思想（DAFlow），<span style=background:#fff88f>使用了可形变transformer（deformable transformer）做为外观估计流的主要架构</span>，同时改进了深层特征提取器和输入输出模块，重新设计并提出了SDAFN_plus作为我们学生模型的架构。值得一提的是，DAFlow是利用人和服装图像的自形变和交叉形变注意力流获得输出结果，以端到端的方式达到逼真的拟合结果。</p><p>需要指出的是，我们的教师网络采用的是开源的SDAFN模型，而学生网络则采用的是我们在SDAFN基础上改进优化而重新构建的SDAFN_Plus模型。</p><h3 id=span-stylebackgroundfff88f43-学生模型sdafn_plus分析span><span style=background:#fff88f>4.3 学生模型SDAFN_plus分析</span></h3><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753928.webp?width=700#center" alt loading=lazy width=700></picture></p><p><strong>图 4-5 子网络SDAFN_plus架构图</strong></p><p>如图所示，我们改进的学生网络SDAF_plus主要有三个模块构成，分别是特征金字塔提取器，级联流估计和浅编码器与解码器。其中，服装与待试穿的人的图像首先被输入到非共享的特征金字塔提取器中；然后，在级联流估计模块中，对自形变和交叉形变注意力流进行估计；最后，利用浅编码器和解码器以及学习到的数据流，得到了最终的试穿结果。</p><p>下面分别具体介绍特征金字塔提取器，级联流估计和浅编码器与解码器这三个模块。</p><h4 id=431-金字塔特征提取器>4.3.1 金字塔特征提取器</h4><p>金字塔特征提取器是一种多尺度特征提取方法，用于解决物体尺度变化问题。在计算机视觉领域中，物体的尺度往往是不确定的，而且同一个物体在不同的尺度下有不同的表现。金字塔特征提取器通过在不同的尺度下提取特征来解决这个问题，从而可以更好地进行物体检测和识别。</p><p><strong><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753404.webp?width=500#center" alt loading=lazy width=500>
</picture>图 4-6 特征金字塔提取器</strong></p><p>金字塔特征提取器通常采用自底向上或自顶向下的方式生成多个尺度的特征图。自底向上的方法是通过在输入图像上应用一个低通滤波器来减小尺度，并对结果进行下采样来生成一系列尺度较小的图像，然后在每个尺度上提取特征。自顶向下的方法是从原始图像开始，通过上采样或插值将其尺度增加，然后在每个尺度上提取特征。两种方法都可以生成多个尺度的特征图，但自顶向下的方法通常更精细，因为它可以利用原始图像的细节信息来生成高分辨率的特征图。</p><p>金字塔特征提取器已被广泛应用于计算机视觉任务，如物体检测、语义分割和行人重识别等。</p><p>在金字塔特征提取器模块，我们的模型有两个自顶向下的金字塔特征提取器，包括一个参考分支和一个源分支,均采用自顶向下的方式生成多个尺度的特征图。其中参考分支将待试穿的人作为输入，源分支将服装图像作为输入。这两个特征提取器具有相同的特征金字塔网络（FPN）结构而且非共享参数。在特征提取器选取方面，团队分别尝试了VGG17和resnet网络，最终选取resnet网络，特征提取器的层数我们做了实验，分别选取3，4，5。最终，在模型大小，模型推导速度，生成效果等因素的综合考量下，将特征提取层层数取为3层。</p><p>我们同时做了对比实验，比较了特征提取层层数分别是3，4，5的模型测试效果。</p><table><thead><tr><th>特征提取层层数</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>FID</td><td>9.05</td><td>8.75</td><td>9.054</td></tr></tbody></table><p><strong>表 4-1 特征提取此器的对比试验</strong></p><h4 id=432-级联流估计>4.3.2 级联流估计</h4><p>在虚拟试衣模型中，我们可以知道的是，对于较大的变形是难以预测的，因为目标域与源域的图像往往是不统一的，为解决这个问题，我们采用了由粗到细的级联流估计，具体操作在下文展开。</p><p>根据金字塔特征提取器提取的hierarchical reference和源特征，估计了两种类型的流和注意力图。其中，第一种是来自参考分支的Self-Flows Fields和Self-Attention Maps；第二种是来自两个分支相互作用的Cross-Flows Fields和Cross-Attention Maps。最低分辨率的特征被输入到DAFN中以预测初始Flow Field和Attention Map。</p><p>然后，它们将被级联地细化和更新。具体来说，参考特征图和源特征图首先由前一个Self- and Cross-DAFlows进行转换，这个操作称为DAWarp；然后，利用变换后的特征来预测剩余流，并得到了具有更精细的新注意力图（上述过程一直持续到n=N）。在模型的实现中，N被设置为3。</p><p>需要说明的是，对于DAWarp操作，如下图所示，DAFlow学习了各种可能的流，将Flow Fields和Attention操作同时应用于特征和图像。在特性方面，源或参考特性被有效地集成到期望的目标位置：</p><p>公式中为参考位置p的第k个采样位置， 表示DAFlow的弯曲特征。在图像层面上，合并多个扭曲的图像丰富了生成的可能性，并被重新组合成具有合理结构和真实纹理的新图像。其中，颈部和手臂的部分是真实生成的，并不在原始图像中。此外，Warp操作应用双线性插值操作，使估计的偏差得以优化与反向传播。</p><h4 id=433-浅编码器与解码器>4.3.3 浅编码器与解码器</h4><p>浅编码器将图像从RGB图像投影到高维空间，并且利用最终估计的流和注意力图，将高维特征空间中的参考人和服装图像与DAWarp进行变换和合并（变换操作与上文提到的DAWarp操作类似）；然后将合并后的结果输入到一个浅解码器中，得到最终的试穿结果。浅编码器和解码器都有两个卷积层，没有下采样操作。值得说明的是，服装图像和参考人图像共享相同的编码器和解码器。实验验证，浅编码器-解码器结构可以有效提高像素级表示能力与流生成质量。</p><h3 id=44-模型训练>4.4 模型训练</h3><h4 id=441-训练平台>4.4.1 训练平台</h4><p>模型训练环境如下表所示：</p><table><thead><tr><th>训练平台</th><th>模型框架</th><th>显存</th><th>显卡</th></tr></thead><tbody><tr><td>Ubuntu</td><td>pytorch</td><td>24G*2</td><td>3080Ti*2</td></tr></tbody></table><p><strong>表4-2 训练环境参数</strong></p><p>在训练时，初始学习率设为0.00005，每迭代30轮变为之前的0.2倍。在模型优化器方面，我们选择adamw,该优化器在机器视觉问题有较好的泛化性能。相比于l2优化器，Adamw在相同迭代轮数下有着更好的准确率。</p><p><strong><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753140.webp?width=500#center" alt=IMG_256 loading=lazy width=500></picture></strong></p><p><strong>图 4-7</strong></p><h4 id=442-数据集>4.4.2 数据集</h4><p>模型训练采用virtual-tryon领域公认的viton公开数据集，并使用了翻转 (flip)、旋转 (rotation)、缩放 (scale)、裁剪 (crop)、移位 (translation)等方法增强数据集。数据增强有助于增强模型泛化能力，并且可以大幅降低过拟合程度。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271753966.webp?width=500#center" alt=拼图片23332-000001_0_000001_0(5)_000001_0(4)_000001_0(2)_000001_0(1) loading=lazy width=500></picture></p><p><strong>图 4-8 数据增强示例图，第一列为原图，后四列由对第一列随机裁剪，旋转得到</strong></p><p>对于教师模型SDAFN的训练，需要额外的人体掩码图和人体姿态估计图，所以我们首先对VITON数据集进行预处理，得到VITON_plus数据集，其中包含了所有人像的掩码图和人像的姿势图，以及对衣服进行预处理得到的分理出衣服背景的衣服前景分割图。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754044.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 4-9 数据集文件目录</strong></p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754907.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 4-10 人像掩码图</strong></p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754613.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 4-11 人体姿态图</strong></p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754719.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 4-12 服装前景分割图</strong></p><p>对于学生模型的训练，只需要将VITON原始人像和原始衣服作为输入，不需要任何额外的辅助信息。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754073.webp?width=600#center" alt=WPS图片拼图 loading=lazy width=600></picture></p><p><strong>图 4-13 原始人像和衣服</strong></p><h4 id=443-训练过程>4.4.3 训练过程</h4><ul><li>知识蒸馏</li></ul><p>知识蒸馏与迁移学习在模型优化中有很重要的应用。一般地，大模型往往是单个复杂网络或者是若干网络的集合，拥有良好的性能和泛化能力，而小模型因为网络规模较小，表达能力有限。因此，可以利用大模型学习到的知识去指导小模型训练，使得小模型具有与大模型相当的性能，参数数量大幅降低，从而实现模型压缩与加速。</p><p>原理介绍如下图所示：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754621.webp?width=500#center" alt loading=lazy width=500></picture></p><p><strong>图 4-14 知识蒸馏原理图</strong></p><ul><li>训练过程</li></ul><p>（1）教师模型训练</p><p>首先，我们使用开源的SDAFN作为教师模型，用预处理后的VITON_plus数据集对教师模型进行训练，使其能够在各种任务上表现出色。在训练过程中，使用了翻转，剪切数据增强，正则化等方法提高模型生成效果。</p><p>（2）学生模型训练</p><p>项目主要采用模型蒸馏训练学生模型。在蒸馏的过程中，我们将原始大模型称为教师模型（teacher），新的小模型称为学生模型（student）。</p><p>学生模型的架构采用我们改进优化后提出的SDAFN_plus,其只需要人物图像和衣服图像作为输入，而不要任何其他的辅助信息。</p><p>与传统的蒸馏方法不同的是，我们将最初的人的图像作为真值，而将教师输出作为学生的输入，而非用教师的结果约束学生，实现教师指导学生（teacher tutor student）的知识蒸馏架构。教师模型使用到了人体掩码和人体姿态信息，结果会更准确，为了把这些信息传授给学生，教师+学生串联起来，实现了端到端的自监督。这样就将一个大型、复杂的神经网络模型（教师模型）中的知识迁移到一个小型、简单的神经网络模型（学生模型），减小了模型参数，同时实现了学生模型的输入只需要人物和衣服的图片，而不需要依赖任何人体解析图或者人体姿态图等任何辅助信息，且学生模型的效果不受限于教师模型。</p><p>值得注意的是学生模型训练时教师模型的参数不再进行更新。我们在训练学生模型时同样采用了三个阶段：</p><ol><li><p>在第一阶段，我们使用分割出衣服前景的衣服图进行训练，使模型可以获得一定的衣服分割的知识。</p></li><li><p>在第二阶段，我们在原始的衣服图上进行训练以进行调优，原始的衣服图像为白色背景。</p></li><li><p>第三阶段，由于我们将教师模型的输出作为学生模型的输入，所以我们可以使教师模型生成不同图片来作为学生模型的输入，我们以此来改变和扩大学生模型训练的数据集</p></li></ol><p>实验表明我们采用三个阶段训练的学生模型相比一阶段训练的模型鲁棒性更强，抗干扰能力更强，拥有更好的性能指标和生成效果。</p><ol><li>模型效果对比</li></ol><p>从表格4-3可以看出，我们的模型使用基于知识蒸馏的训练方法，可以大幅减少模型体积，同时保留教师模型高性能表现。</p><table><thead><tr><th><strong>模型名称</strong></th><th><strong>模型大小</strong></th><th><strong>模型评价指标（FID）on VITON数据集</strong></th></tr></thead><tbody><tr><td><strong>传统多任务模型（CP- VTON）</strong></td><td>200MB</td><td>30.50</td></tr><tr><td><strong>SDAFN(教师模型）</strong></td><td>356MB</td><td>10.97</td></tr><tr><td><strong>SDAFN_plus（学生模型）</strong></td><td>64MB（fp32）</td><td>8.74</td></tr></tbody></table><p><strong>表 4-3</strong></p><h2 id=5-工程化实现>5 工程化实现</h2><h3 id=span-stylebackgroundfff88f51-工程化实现的整体框架span><span style=background:#fff88f>5.1 工程化实现的整体框架</span></h3><p>对于深度学习模型来说，模型部署指让训练好的模型在特定环境中运行的过程。相比于软件部署，模型部署会面临更多的难题。运行模型所需的环境难以配置。深度学习模型通常是由一些框架编写，比如 PyTorch、TensorFlow。由于框架规模、依赖环境的限制，这些框架不适用于生产环境。深度学习模型的结构通常比较庞大，需要大量的算力才能满足实时运行的需求。模型的运行效率需要优化。因为这些难题的存在，模型部署不能靠简单的环境配置与安装完成。经过工业界和学术界数年的探索，模型部署有了一条流行的流水线，即先在深度学习框架中训练原始模型，再转换为中间表示，经过优化后部署在推理引擎运行。这一流水线能解决部署中的两大问题，一是使用框架和推理引擎中间表示，二是通过中间表示的网络结构优化和推理引擎对运算的底层优化，提高模型运算效率。</p><p>下图为我们工程化实现的整体框架图：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754761.webp?width=800#center" alt=未命名文件-6 loading=lazy width=800></picture></p><p><strong>图 5-1 工程化整体框架图</strong></p><p>首先对保存下来的pth模型进行处理，剔除梯度，只保存模型的权重，得到后处理过后的pth，然后使用pytorch内置函数导出为onnx格式，将精度格式为fp32的onnx模型分别截断为fp16，量化为int8格式，最后使用onnxruntime推理引擎推导模型。</p><h3 id=52-模型转换>5.2 模型转换</h3><h4 id=521-pth模型的后处理>5.2.1 pth模型的后处理</h4><p>为了训练过程的方便，在训练过程中保存chekpoints时我们将模型的权重和梯度，当前的学习率，训练轮数一并保存下来了，模型参数的梯度和学习率，当前的训练轮数在模型断点训练时十分有用，但在模型推导时并不会发挥作用，而且还会增加模型存储空间的占用，延长推理时模型的加载时间，所以我们首先对pth模型进行后处理，剔除了对于推理无作用的梯度，只保留模型的权重，以方便后面对pth模型的转换。</p><h4 id=522模型的导出>5.2.2模型的导出</h4><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271757942.webp?width=500#center" alt=WechatIMG99 loading=lazy width=500></picture></p><p><strong>图 5-2 模型转换示意图</strong></p><p>在模型导出过程中，我们选用ONNX来进行模型中间表示。ONNX （Open Neural Network Exchange）是 Facebook 和微软在2017年共同发布的，用于标准描述计算图的一种格式。目前，在数家机构的共同维护下，ONNX 已经对接了多种深度学习框架和多种推理引擎。因此，如图4-4所示，ONNX 被当成了深度学习框架到推理引擎的桥梁。就像编译器的中间语言一样，由于各框架兼容性不一，我们通常用ONNX来作为便于在各个主流深度学习框架中迁移模型的中间表达格式。</p><p>从Pytorch到ONNX在本质上是一种语言的翻译，但ONNX只记录不考虑控制流的静态图，通过使用trace方法，给定一组输入，再实际执行一遍模型，即把这组输入对应的计算图记录下来，保存为 ONNX 格式。在转换完成后，可使用Netron来可视化ONNX模型，查看包括输入输出和每个算子的信息。每个算子记录的信息包括算子属性、图结构、权重。算子属性信息即图中 attributes 里的信息，对于卷积来说，算子属性包括了卷积核大小(kernel_shape)、卷积步长(strides)等内容。这些算子属性最终会用来生成一个具体的算子。图结构信息指算子节点在计算图中的名称、邻边的信息。根据每个算子节点的图结构信息，就能完整地复原出网络的计算图。权重信息指的是网络经过训练后，算子存储的权重信息。对于卷积来说，权重信息包括卷积核的权重值和卷积后的偏差值。</p><h4 id=523-导出代码>5.2.3 导出代码</h4><p>我们使用pytoch自带的torch.onnx.export函数将pth模型导出为onnx格式。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln>1</span><span class=cl><span class=n>torch</span><span class=o>.</span><span class=n>onnx</span><span class=o>.</span><span class=n>export</span><span class=p>(</span><span class=n>sdafnet_plus</span><span class=p>,</span> <span class=p>(</span><span class=n>person_input</span><span class=p>,</span> <span class=n>clothes_input</span><span class=p>),</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=n>saved_model_path</span><span class=p>,</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=n>do_constant_folding</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=c1># 是否执行常量折叠优化</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=n>opset_version</span><span class=o>=</span><span class=mi>16</span><span class=p>,</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>input_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;person&#39;</span><span class=p>,</span> <span class=s1>&#39;clothes&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=n>output_names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;outcome&#39;</span><span class=p>])</span>
</span></span></code></pre></div><ul><li>torch.onnx.export: 这是调用torch.onnx模块的export函数将PyTorch模型转换为ONNX格式的函数。</li><li>sdafnet_plus: 这是要转换为ONNX格式的PyTorch模型。</li><li>saved_model_path: 这是导出的ONNX模型的保存路径。</li><li>do_constant_folding: 这个参数控制是否在导出时执行常量折叠优化，将模型中的常量计算成一个常量，以减少计算的开销。</li><li>opset_version: 这个参数指定所使用的ONNX版本号。</li><li>verbose: 这个参数控制导出过程中是否打印输出。</li><li>input_names: 这个参数是模型输入的名称，用于在导出模型时标识模型的输入。</li><li>output_names: 这个参数是模型输出的名称，用于在导出模型时标识模型的输出。</li></ul><p>用torch导出的模型有时候参数过多，不利于查看。查找资料onnxsim可以简化模型，让显示更加自然。</p><p>如，reshap层的导出，红框中细节参数被显示出现。默认导出：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754973.webp?width=300#center" alt=IMG_256 loading=lazy width=300></picture></p><p><strong>图 5-3 简化前示意图</strong></p><p>使用onnxsim 可以让结构更加简洁，具体执行方式如下：</p><ol><li>安装onnxsim包</li><li>pip install onnx-simplifier</li><li>加载onnx文件，simplify处理后重新保存，代码如下：</li><li><strong>from</strong> onnxsim <strong>import</strong> simplify</li><li>onnx_model = onnx.load(output_path) # load onnx model</li><li>model_simp, check = simplify(onnx_model)</li><li><strong>assert</strong> check, &ldquo;Simplified ONNX model could not be validated&rdquo;</li><li>onnx.save(model_simp, output_path)</li><li><strong>print</strong>(&lsquo;finished exporting onnx&rsquo;)</li><li>使用netron对模型进行可视化查看，结果导出如下：</li></ol><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754902.webp?width=300#center" alt=IMG_256 loading=lazy width=300></picture></p><p><strong>图 5-4 简化后示意图</strong></p><p>使用onnxsim工具对导出的onnx模型进行简化，不仅能使onnx模型的结构更加清晰明了，也可以使减少模型大小，对于我们的学生模型而言，经过onnxsim的处理后大概减少了4MB。</p><h4 id=span-stylebackgroundfff88f524-bug修复span><span style=background:#fff88f>5.2.4 Bug修复</span></h4><p>在模型转换阶段，我们遇到了pytorch内部torch.repeat_interleave()函数bug，该bug 导致模型导出后某一具体节点维度不匹配，但在模型导出阶段并未提示错误（该bug已由pytorch开发社区解决，预计于之后版本修复）。</p><p>我们成功使用上述转换代码将pth模型转换为了onnx 格式，但我们在后续推理中发现onnx模型存在错误，推理时显示multi_add（19）这个节点的输入和输出维度不匹配，经过debug，我们使用netron这个可视化工具可视化导出的onnx模型，找到了出问题的节点，然后与代码中的操作进行匹配，发现是pytoch中torch.repeat_interleave()这个函数的导出出了问题，经过不懈的查找，我们发现这是pytoch发行版中一个仍未解决的bug，这个函数的导出对onnx算子的映射出现了错误，我们在pytorch社区中找到了解决的方法，此bug 2022年12月已被社区解决，但我们当时使用的时候最新的pytorch发行版仍未修正此bug，我们尝试了从github社区的最新pytorch源码重新编译安装以解决此bug，同时我们发现使用tensor.shape，tensor.view与tensor.repeat这几个函数组合以实现和torch.repeat.interleave这个函数一样的功能。</p><p>为解决该bug，我们重写了该函数torch.repeat_interleave（），以实现其基本功能。</p><p>torch.repeat_interleave()是PyTorch中用于重复张量元素的一个函数。它的输入参数包括：input（类型：torch.Tensor）- 输入张量，repeats（类型：int或torch.Tensor）- 每个元素的重复次数，以及可选参数dim（类型：int）- 重复的维度。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln>1</span><span class=cl><span class=n>att_maps</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>repeat_interleave</span><span class=p>(</span><span class=n>att_maps</span><span class=p>,</span> <span class=n>out_ch</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><p>具体代码修改如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=n>att_maps_1c</span> <span class=o>=</span> <span class=n>att_maps</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1># 计算变量att_maps的第一维大小，即att_maps_1c</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl> <span class=n>att_maps_2c</span> <span class=o>=</span> <span class=n>att_maps</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1># 计算变量att_maps的第二维大小，即att_maps_2c</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=n>att_maps_3c</span> <span class=o>=</span> <span class=n>att_maps</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1># 计算变量att_maps的第三维大小，即att_maps_3c</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=n>att_maps_4c</span> <span class=o>=</span> <span class=n>att_maps</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=c1># 计算变量att_maps的第四维大小，即att_maps_4c</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=n>att_maps</span> <span class=o>=</span><span class=n>att_maps</span><span class=o>.</span><span class=n>view</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>att_maps_3c</span><span class=p>,</span> <span class=n>att_maps_4c</span><span class=p>)</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1># 将变量att_maps的形状改为(-1, 1, att_maps_3c, att_maps_4c)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=n>att_maps</span><span class=o>=</span> <span class=n>att_maps</span><span class=o>.</span><span class=n>repeat</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>out_ch</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=n>view</span><span class=p>(</span><span class=n>att_maps_1c</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=n>att_maps_3c</span><span class=p>,</span> <span class=n>att_maps_4c</span><span class=p>)</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=c1># 将变量att_maps重复out_ch次，然后改变形状为(att_maps_1c, -1, att_maps_3c, att_maps_4c)</span>
</span></span></code></pre></div><p>经过测试，我们发现使用tensor.shape，tensor.view与tensor.repeat这几个函数组合实现torch.repeat_interleave()的功能，可以使模型的推导速度加快，此节点的运算速度可以提升约20%。</p><h3 id=53-模型量化>5.3 模型量化</h3><p>量化(Quantization)是指将高精度浮点数(如float32)表示为低精度整数(如int8)的过程，从而提高神经网络的效率和性能。</p><p><strong>图 5-5 量化示意图</strong></p><h4 id=531-fp16量化>5.3.1 Fp16量化</h4><p>FP16量化是一种对浮点数进行压缩的技术，将32位浮点数压缩为16位.如图4-4所示，FP16比FP32表示位数减少一半，对模型进行fp16量化可以在不牺牲模型性能的情况下，显著减少模型的存储和计算成本。fp16量化可以将模型中的权重和激活值从32位浮点数减少到16位浮点数，从而减少了模型的内存占用和计算复杂度。此外，fp16量化还可以提高模型的运行速度和功耗效率，特别是在移动设备和嵌入式设备上。</p><p>OnnxMlTools是一个用于处理ONNX模型的Python库，它提供了一组工具和API，使用户能够读取、创建、转换、优化和运行ONNX模型。该库支持多种深度学习框架（如TensorFlow、PyTorch、Caffe2等）和多种硬件平台（如CPU、GPU、TPU等），并且可以将ONNX模型转换为其他格式（如TensorFlow、PyTorch、CoreML等）。此外，OnnxMlTools还支持模型的可视化、优化和解析，并且可以在不同的编程语言（如C++、Java、python等）中使用。总之，OnnxMlTools是一个非常强大的工具，可以帮助深度学习开发人员更好地管理和使用ONNX模型。</p><p>我们使用OnnxMITools这个库进行fp16量化，实现截断的核心代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln>1</span><span class=cl><span class=kn>import</span> <span class=nn>onnxmltools</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=kn>from</span> <span class=nn>onnxmltools.utils.float16_converter</span> <span class=kn>import</span> <span class=n>convert_float_to_float16onnx_model</span> <span class=o>=</span> <span class=n>onnxmltools</span><span class=o>.</span><span class=n>utils</span><span class=o>.</span><span class=n>load_model</span><span class=p>(</span><span class=n>input_onnx_model</span><span class=p>)</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=n>onnx_model</span> <span class=o>=</span> <span class=n>convert_float_to_float16</span><span class=p>(</span><span class=n>onnx_model</span><span class=p>)</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=n>onnxmltools</span><span class=o>.</span><span class=n>utils</span><span class=o>.</span><span class=n>save_model</span><span class=p>(</span><span class=n>onnx_model</span><span class=p>,</span> <span class=n>output_onnx_model</span><span class=p>)</span>
</span></span></code></pre></div><p>这段代码使用了onnxmltools库中的float16_converter模块，用于将输入的ONNX模型中的浮点数类型转换为半精度浮点数类型。</p><ul><li>第1行导入了onnxmltools库。</li><li>第2行从onnxmltools.utils.float16_converter模块中导入了convert_float_to_float16函数，用于将浮点数类型转换为半精度浮点数类型，并使用load_model函数加载输入的ONNX模型。</li><li>第3行使用convert_float_to_float16函数将ONNX模型中的浮点数类型转换为半精度浮点数类型。</li><li>最后使用onnxmltools.utils.save_model函数将转换后的ONNX模型保存到指定的输出路径。</li></ul><h4 id=532-int8量化>5.3.2 Int8量化</h4><p>我们在模型量化阶段尝试了FP16和int8两种量化形式，最终比较选择了FP16量化后的模型，这里简短介绍一下我们所做的int8量化工作。Int8量化分为动态量化与静态量化。</p><p>ONNXRuntime 中的量化是指 ONNX 模型的 8 bit 线性量化。在量化过程中，浮点实数值映射到 8 bit 量化空间，其形式为：</p><p>VAL_fp32 = Scale * （VAL_quantized - Zero_point）</p><p>Scale 是一个正实数，用于将浮点数映射到量化空间，计算方法如下：</p><ul><li>对于非对称量化：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln>1</span><span class=cl><span class=n>scale</span> <span class=o>=</span> <span class=p>(</span><span class=n>data_range_max</span> <span class=o>-</span> <span class=n>data_range_min</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=n>quantization_range_max</span> <span class=o>-</span> <span class=n>quantization_range_min</span><span class=p>)</span>
</span></span></code></pre></div><ul><li>对于对称量化：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln>1</span><span class=cl><span class=n>scale</span> <span class=o>=</span> <span class=nb>abs</span><span class=p>(</span><span class=n>data_range_max</span><span class=p>,</span> <span class=n>data_range_min</span><span class=p>)</span> <span class=o>*</span> <span class=mi>2</span> <span class=o>/</span> <span class=p>(</span><span class=n>quantization_range_max</span> <span class=o>-</span> <span class=n>quantization_range_min</span><span class=p>)</span>
</span></span></code></pre></div><p>Zero_point 表示量化空间中的零。重要的是，浮点零值在量化空间中可以精确地表示。这是因为许多 CNN 都使用零填充。如果在量化后无法唯一地表示 0，则会导致精度误差。</p><p>ONNXRuntime 支持两种模型量化方式：</p><ul><li>动态量化：对于动态量化，缩放因子（Scale）和零点（Zero Point）是在推理时计算的，并且特定用于每次激活。因此它们更准确，但引入了额外的计算开销</li><li>静态量化：对于静态量化，它们使用校准数据集离线计算。所有激活都具有相同的缩放因子（Scale）和零点（Zero Point）</li></ul><p>以下是我们进行动态量化的核心代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=o>**</span><span class=n>import</span><span class=o>**</span> <span class=n>onnxruntime</span> <span class=k>as</span> <span class=n>ort</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=o>**</span><span class=n>from</span><span class=o>**</span> <span class=n>onnxruntime</span><span class=o>.</span><span class=n>quantization</span> <span class=o>**</span><span class=n>import</span><span class=o>**</span> <span class=n>QuantizationMode</span><span class=p>,</span> <span class=n>QuantizationParameters</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=n>model_path</span> <span class=o>=</span> <span class=s2>&#34;path/to/your/model.onnx&#34;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=n>sess</span> <span class=o>=</span> <span class=n>ort</span><span class=o>.</span><span class=n>InferenceSession</span><span class=p>(</span><span class=n>model_path</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=n>qparams</span> <span class=o>=</span> <span class=n>QuantizationParameters</span><span class=p>(</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=n>force_fusions</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=n>use_external_data_format</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=n>symmetric_weight</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=n>symmetric_activation</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=n>weight_scale</span><span class=o>=</span><span class=mf>0.5</span><span class=p>,</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=n>activation_scale</span><span class=o>=</span><span class=mf>0.2</span><span class=p>,</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=n>quantization_mode</span><span class=o>=</span><span class=n>QuantizationMode</span><span class=o>.</span><span class=n>IntegerOps</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>首先通过指定模型路径来创建一个推理会话，然后设置QuantizationParameters的各个参数，包括force_fusions（是否强制融合操作）、use_external_data_format（是否使用外部数据格式）、symmetric_weight（是否对权重进行对称量化）、symmetric_activation（是否对激活进行对称量化）、weight_scale（权重量化的缩放因子）、activation_scale（激活量化的缩放因子）和quantization_mode（量化模式）。最后，这些参数可以用于对模型进行量化。</p><p>下面是我们进行静态量化的核心代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=n>input_model_path</span> <span class=o>=</span> <span class=s1>&#39;../onnx/epoch129-batch-1-fp32.onnx&#39;</span> <span class=c1># 输入onnx模型</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=n>output_model_path</span> <span class=o>=</span> <span class=s1>&#39;../onnx/epoch129-batch-1-int8.onnx&#39;</span> <span class=c1># 输出模型名</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=n>calibration_dataset_path</span> <span class=o>=</span> <span class=s1>&#39;../data/VITON/VITON_test/test_img&#39;</span> <span class=c1># 校准人像数据集图像地址</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=n>cloth_dataset_path</span> <span class=o>=</span> <span class=s1>&#39;../data/VITON/VITON_test/clothes&#39;</span> <span class=c1># 校准衣服数据集图像地址</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1># 用于校准数据加载,注意这个方法里面需要做图像一些操作,与pytorch训练的时候加载数据操作一致</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=n>dr</span> <span class=o>=</span> <span class=n>DataReader</span><span class=p>(</span><span class=n>calibration_dataset_path</span><span class=p>,</span> <span class=n>cloth_dataset_path</span><span class=p>,</span> <span class=n>input_model_path</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1># 开始量化</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=n>quantize_static</span><span class=p>(</span><span class=n>input_model_path</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=n>output_model_path</span><span class=p>,</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=n>dr</span><span class=p>,</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=n>quant_format</span><span class=o>=</span><span class=n>QuantFormat</span><span class=o>.</span><span class=n>QDQ</span><span class=p>,</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=n>per_channel</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=n>weight_type</span><span class=o>=</span><span class=n>QuantType</span><span class=o>.</span><span class=n>QInt8</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=54-模型推断>5.4 模型推断</h3><p>推理引擎是一种软件工具，用于运行机器学习模型的推理（预测）过程。它可以将训练好的模型输入到系统中进行推理，通过计算得出模型的预测结果。推理引擎通常具有高效、可扩展、低延迟等特点，能够满足大规模、高并发的推理需求。</p><p>ONNX Runtime 是一种高性能、跨平台的推理引擎，它支持多种硬件平台，包括 CPU、GPU 和 FPGA 等，并且可以与多种编程语言和框架（如 C++、Python、TensorFlow、PyTorch 等）进行集成。ONNX Runtime 还支持多种模型格式，包括 ONNX、TensorFlow、Keras、MXNet 等，可以方便地加载和运行各种机器学习模型。</p><p>我们选择 ONNX Runtime 作为我们模型推理引擎的主要原因是它具有以下优势：</p><ul><li>高性能：ONNX Runtime 采用了多种优化技术，包括 JIT 编译、自动调度、张量融合等，可以在多种硬件平台上获得高效的推理性能。</li><li>跨平台：ONNX Runtime 支持多种硬件平台和操作系统，可以方便地在不同的环境中部署和运行。</li><li>多框架支持：ONNX Runtime 支持多种机器学习框架和模型格式，可以方便地与不同的工具和库进行集成。</li><li>社区支持：ONNX Runtime 是一个开源项目，拥有庞大的社区支持和贡献者，可以获得及时的技术支持和更新。</li></ul><p>综上所述，选择 ONNX Runtime 作为推理引擎可以帮助开发者实现高效、跨平台、多框架的机器学习模型部署和推理，所以我们选择onnxruntime作为我们的推理引擎。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754958.webp?width=600#center" alt=2470528-20220307221855862-1121104331 loading=lazy width=600></picture></p><p><strong>图 5-6 ONNXRuntime 总览</strong></p><p>为了使模型实现真正的端到端处理，我们先使用opencv处理输入的图片，使其可以被模型处理。</p><p>具体处理逻辑如下,通过调研得知，cv2.dnn.blobFromImage函数可很方便的对图像进行预处理，包括减均值，比例缩放，裁剪，交换通道等，并返回一个4通道的blob，用于神经网络的输入。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=n>person_img</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>imread</span><span class=p>(</span><span class=n>args</span><span class=o>.</span><span class=n>input_person</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1># cv2.imshow(&#39;image&#39;, person_img)</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=n>cloth_img</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>imread</span><span class=p>(</span><span class=n>args</span><span class=o>.</span><span class=n>input_cloth</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1># 读到的是BGR数据，该方法不能读取带中文路径的图像数据。</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1># 对读入的图片裁剪到指定比例</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=n>ratio</span> <span class=o>=</span> <span class=mf>256.0</span> <span class=o>/</span> <span class=mf>192.0</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=n>inp_h</span><span class=p>,</span> <span class=n>inp_w</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>person_img</span><span class=o>.</span><span class=n>shape</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=n>current_ratio</span> <span class=o>=</span> <span class=n>inp_h</span> <span class=o>/</span> <span class=n>inp_w</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=n>current_ratio</span> <span class=o>&gt;</span> <span class=n>ratio</span><span class=p>:</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=n>center_h</span> <span class=o>=</span> <span class=n>inp_h</span> <span class=o>//</span> <span class=mi>2</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=n>out_h</span> <span class=o>=</span> <span class=n>inp_w</span> <span class=o>*</span> <span class=n>ratio</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=n>start</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>center_h</span> <span class=o>-</span> <span class=n>out_h</span> <span class=o>//</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=n>end</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>center_h</span> <span class=o>+</span> <span class=n>out_h</span> <span class=o>//</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=n>person_img</span> <span class=o>=</span> <span class=n>person_img</span><span class=p>[</span><span class=n>start</span><span class=p>:</span><span class=n>end</span><span class=p>,</span> <span class=o>...</span><span class=p>]</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=o>**</span><span class=k>else</span><span class=o>**</span><span class=p>:</span>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=n>center_w</span> <span class=o>=</span> <span class=n>inp_w</span> <span class=o>//</span> <span class=mi>2</span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=n>out_w</span> <span class=o>=</span> <span class=n>inp_h</span> <span class=o>/</span> <span class=n>ratio</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=n>start</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>center_w</span> <span class=o>-</span> <span class=n>out_w</span> <span class=o>//</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=n>end</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>center_w</span> <span class=o>+</span> <span class=n>out_w</span> <span class=o>//</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=n>person_img</span> <span class=o>=</span> <span class=n>person_img</span><span class=p>[:,</span> <span class=n>start</span><span class=p>:</span><span class=n>end</span><span class=p>,</span> <span class=p>:]</span>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=n>person_img</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>dnn</span><span class=o>.</span><span class=n>blobFromImage</span><span class=p>(</span><span class=n>person_img</span><span class=p>,</span> <span class=mf>1.0</span> <span class=o>/</span> <span class=mf>127.5</span><span class=p>,</span> <span class=p>(</span><span class=mi>192</span><span class=p>,</span> <span class=mi>256</span><span class=p>),</span> <span class=n>mean</span><span class=o>=</span><span class=p>(</span><span class=mf>127.5</span><span class=p>,</span> <span class=mf>127.5</span><span class=p>,</span> <span class=mf>127.5</span><span class=p>),</span> <span class=n>swapRB</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=ln>22</span><span class=cl><span class=n>cloth_img</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>dnn</span><span class=o>.</span><span class=n>blobFromImage</span><span class=p>(</span><span class=n>cloth_img</span><span class=p>,</span> <span class=mf>1.0</span> <span class=o>/</span> <span class=mf>127.5</span><span class=p>,</span> <span class=p>(</span><span class=mi>192</span><span class=p>,</span> <span class=mi>256</span><span class=p>),</span> <span class=n>mean</span><span class=o>=</span><span class=p>(</span><span class=mf>127.5</span><span class=p>,</span> <span class=mf>127.5</span><span class=p>,</span> <span class=mf>127.5</span><span class=p>),</span> <span class=n>swapRB</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></div><p>ONNX Runtime是直接对接ONNX的跨平台机器学习推理加速器，基于ONNX的模型推断非常方便和高效，ONNXRuntime可以直接读取并运行.onnx文件, 而不需要再把 .onnx 格式的文件转换成其他格式的文件。只需要加载数据和模型，调用runtime进行推理即可。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=n>sess_options</span> <span class=o>=</span> <span class=n>onnxruntime</span><span class=o>.</span><span class=n>SessionOptions</span><span class=p>()</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=n>sess_options</span><span class=o>.</span><span class=n>intra_op_num_threads</span> <span class=o>=</span> <span class=mi>4</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=n>sess_options</span><span class=o>.</span><span class=n>execution_mode</span> <span class=o>=</span> <span class=n>onnxruntime</span><span class=o>.</span><span class=n>ExecutionMode</span><span class=o>.</span><span class=n>ORT_SEQUENTIAL</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=n>sess_options</span><span class=o>.</span><span class=n>graph_optimization_level</span> <span class=o>=</span> <span class=n>onnxruntime</span><span class=o>.</span><span class=n>GraphOptimizationLevel</span><span class=o>.</span><span class=n>ORT_ENABLE_ALL</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=n>onnx_session</span> <span class=o>=</span> <span class=n>onnxruntime</span><span class=o>.</span><span class=n>InferenceSession</span><span class=p>(</span><span class=n>model_path</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=n>inputs</span> <span class=o>=</span> <span class=p>(</span><span class=n>person_img</span><span class=p>,</span> <span class=n>cloth_img</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=n>output_name</span> <span class=o>=</span> <span class=n>onnx_session</span><span class=o>.</span><span class=n>get_outputs</span><span class=p>()[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=n>input_name1</span> <span class=o>=</span> <span class=n>onnx_session</span><span class=o>.</span><span class=n>get_inputs</span><span class=p>()[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=n>input_name2</span> <span class=o>=</span> <span class=n>onnx_session</span><span class=o>.</span><span class=n>get_inputs</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=n>outputs</span> <span class=o>=</span> <span class=n>onnx_session</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=p>{</span><span class=n>input_name1</span><span class=p>:</span> <span class=n>inputs</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>input_name2</span><span class=p>:</span> <span class=n>inputs</span><span class=p>[</span><span class=mi>1</span><span class=p>]})</span>
</span></span></code></pre></div><h2 id=6-模型部署>6 模型部署</h2><p>我们的模型分别采用了服务器端的Web部署和本地化的可执行程序exe部署两种部署方式，其中服务器端的Web部署我们采用了前后端分离的开发策略，前端使用Vue框架，后端使用Flask框架。同时后端使用Gunicorn容器，前端使用Nginx容器来提高Web应用程序的性能和稳定性。</p><p>Web端模型部署在<a href=http://47.92.51.188:81/ target=_blank rel="noopener noreferrer">http://47.92.51.188:81/</a>（(可通过此链接访问我们的网页：无忧工作室)），本地化的可执行程序也可以从Web页面上获取下载链接。</p><h3 id=61-web部署整体框架图>6.1 web部署整体框架图</h3><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754840.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 6-1 Web流程图</strong></p><h3 id=62-web前端部署>6.2 web前端部署</h3><p>为了更好的展现模型效果，前端页面包括四个部分：首页，试衣体验，视频介绍和软件下载。</p><p>在首页，我们将展示自主设计的团队logo及virtual-tryon介绍动画,展示虚拟试衣的技术背景和我们的模型特色。</p><p>在试衣体验部分，我们提供现成的测试集供用户体验虚拟试衣，并为用户上传测试数据提供参考，用户可自己选择人物和衣物图进行上传，后台推理程序会返回推理结果并展示给用户。</p><p>在视频介绍部分，我们将通过视频的方式介绍虚拟试衣的背景，我们模型的算法以及网页和本地化可执行程序的使用方法，在软件下载部分我们提供可执行的exe程序供用户本地运行。</p><h4 id=621-目录结构与文件>6.2.1 目录结构与文件</h4><p>前端部署项目目录结构如下：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271754834.webp?width=250#center" alt loading=lazy width=250></picture></p><p><strong>图 6-2 前端项目目录结构图</strong></p><p>在上图目录结构中：</p><ul><li>idea目录储存IntelliJ IDEA项目的配置信息。</li><li>dist目录是打包后的文件，用于服务器端上传部署。</li><li>jsconfig.json用于配置VS Code的JavaScript语言服务。</li><li>node_modules：包含项目依赖的所有npm包。</li><li>public：包含静态资源，如HTML文件、图标和CSS文件。</li><li>src：包含项目源代码，如Vue组件、JavaScript文件和CSS文件。</li><li>static：包含静态资源，如图片和视频。</li><li>vue.config.js：用于配置Vue CLI。</li></ul><h4 id=622-项目构建与打包>6.2.2 项目构建与打包</h4><p>（1） 环境配置</p><p>安装Node.js，作为前端工程化项目运行的基础环境；安装Vue和Vue CLI，用于快速构建Vue工程项目；安装nrm 镜像管理工具切换镜像并安装npm。</p><p>（2） 项目开发</p><p>网页基于Vue.js框架进行开发。Vue.js是一款流行的JavaScript前端框架，旨在更好地组织与简化Web开发。Vue所关注的核心是MVC模式中的视图层，同时，它也能方便地获取数据更新，并通过组件内部特定的方法实现视图与模型的交互。</p><p>我们通过使用Vue.js的模板用于创建虚拟试衣网站，需要指明的是：</p><ul><li>TryOn.vue主要定义试衣体验界面展示逻辑与用户交互；</li><li>WelcomeTo.vue主要定义首页展示与交互；</li><li>TryOn.vue和WelcomeTo.vue两个文件都存compoents路径下。</li><li>在public目录下：编写使用flexBox布局的HTML页面，创建一个垂直滚动的图像列表。创建CSS 文件，定义HTML元素的样式，例如定义元素周围空间，控制元素外观和布局，控制元素背景颜色，显示方式等。</li><li>在stitic目录下：存放静态文件，包括示例虚拟试衣数据集，展示视频等。</li></ul><h3 id=63-web后端部署>6.3 web后端部署</h3><p>后端项目目录如下：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755126.webp?width=400#center" alt loading=lazy width=400></picture></p><p><strong>图 6-3 后端项目目录图</strong></p><p>在上图目录中：</p><ul><li>Main.py 为主程序，提供了后端程序的调用，并定义了后端的接口，获取用户上传的图片，经过调用处理后返回给用户生成的试衣图片</li><li>Process.py 处理文件储存逻辑，返回文件名去除扩展名的部分。</li><li>onnx目录下储存部署在onnxruntime推理中的FP16量化模型</li><li>Virtual_TryON.py对输入图片进行裁剪至指定比例，随后设置onnx对话的参数，调用run方法，得到模型的输出结果</li></ul><h3 id=64-项目服务器环境部署>6.4 项目服务器环境部署</h3><p><picture><img class=img-fluid src=https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755125.webp alt loading=lazy></picture></p><p><strong>图 6-4 服务器环境部署</strong></p><p>团队选用阿里云centos作为服务器部署端，在配置规则中开放81端口用于服务访问。</p><p>在技术选型方面，由于nginx服务器性能优秀，运行稳定，故选择nginx作为前端框架。</p><p>（1）环境配置</p><p>首先安装nginx前置环境，并上传nginx，修改对应路径名称即可。</p><p>（2）配置文件修改</p><p>修改nginx.conf配置文件，将监听端口改为81，并将 root和index改为virtual-tryon项目所在dist目录。使用后台启动命令再次启动Nginx，即可完成前端web页面部署。</p><h2 id=span-stylebackgroundfff88f7-模型测试span><span style=background:#fff88f>7 模型测试</span></h2><h3 id=71-实际效果图展示>7.1 实际效果图展示</h3><p>在生成图中，可以看到模型对人物和衣服的拟合效果较好，衣物细节得以保留，且能很好的贴合人物身形，在下图中可以发现，我们的模型甚至能对孕妇做出较好的试衣效果，与此同时，我们相较之其他模型，我们的实际效果也极为出色。</p><p>需要指出的是，效果展示图中，左一是输入人像，左二是试穿服装，右一是试穿结果。</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755434.webp?width=400#center" alt=pictures loading=lazy width=400></picture></p><p><strong>图 7-1 效果展示</strong></p><p>下面是我们的模型与目前比较出名的backbone（CP-VTON，PFAFN，SDAFN）的效果对比：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755290.webp?width=700#center" alt=a349e1d7d702a6840dae20d1eb33201 loading=lazy width=700></picture></p><p><strong>图</strong> 7-2a <strong>模型对比图</strong></p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755418.webp?width=700#center" alt=wps loading=lazy width=700></picture></p><p><strong>图 7-2b 模型对比图</strong></p><h3 id=72-评价指标>7.2 评价指标</h3><p>根据赛题方的要求，项目采用FID作为模型的评价指标。</p><p>需要指明的是，FID指的是Fréchet Inception Distance。其基本思想是直接考虑生成数据和真实数据在feature层次的距离，不再额外的借助分类器，因此来衡量生成图片和真实图片的距离。FID 从原始图像的计算机视觉特征的统计方面的相似度来衡量两组图像的相似度，这种视觉特征是使用 Inception v3 图像分类模型计算的得到的。分数越低代表两组图像越相似，或者说二者的统计量越相似，FID 在最佳情况下的得分为 0.0，表示两组图像相同。</p><p>下图为图像失真程度提高与FID分数之间关系：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755648.webp?width=700#center" alt=640 loading=lazy width=700></picture></p><p><strong>图 7-3 FID与图像失真程度关系</strong></p><p>FID的计算公式如下：</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755305.webp?width=600#center" alt="Screenshot 2023-04-06 235604" loading=lazy width=600></picture></p><p>下面的表格为模型的FID指标与一些SOTA模型的比较：</p><table><thead><tr><th>methods</th><th>CP-VTON</th><th>Cloth-Flow</th><th>ACGPN</th><th>SDAFN</th><th>PF-AFN</th><th>ours</th></tr></thead><tbody><tr><td>VITON(FID)</td><td>24.43</td><td>14.43</td><td>15.67</td><td>12.05</td><td>10.09</td><td>8.75</td></tr></tbody></table><p><strong>表 7-1 FID测试指标</strong></p><p>可以看出的是，我们的模型的FID较之目前先进的虚拟试衣模型，数据指标都是处于领先地位。</p><h3 id=73-模型大小分析>7.3 模型大小分析</h3><p>我们采用知识蒸馏的方法训练学生模型，在保留高质量生成效果的同时大大减少了模型的参数量，同时通过改变学生模型金字塔特征提取层的层数来调节模型大小，并且我们的模型不依赖于人体解析图等任何辅助信息，不需要其他模型作为辅助，工程化部署的大小只有我们自己一个模型的大小，大大减少了参数量，以下是我们不同精度格式模型的大小以及生成效果的FID指标：</p><ul><li>特征提取层为五时，pytorch模型原始大小为143MB，FID指标为9.084</li><li>特征提取层为四时，pytorch模型原始大小为104MB，FID指标为8.749，经过我们工程化处理，模型大小控制为53MB（精度格式fp16）</li><li>特征提取层为三时，pytorch模型原始大小为64MB，FID指标为9.05，经过我们的工程化处理后，模型大小控制为34.75MB（精度格式为fp16）</li></ul><p>在工程化时我们同样进行了模型的int8静态量化，但int8静态量化后的模型生成效果失真较为严重，而特征提取层为三的fp16模型在控制模型大小的同时，仍然保留了高质量的生成效果，所以我们选用34.75MB的fp16模型作为我们最后部署的对象。</p><h3 id=74-推理速度分析>7.4 推理速度分析</h3><p>我们采用了一系列策略来加速我们的推导速度</p><p><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755175.webp?width=600#center" alt loading=lazy width=600></picture></p><p><strong>图 7-4 推理加速策略分析</strong></p><ul><li><p>我们的模型为端到端单任务模型，避免了多任务模型计算开销大的缺点，加快了推导速度，推理时间只相当于PF-AFN一阶段的推理时间。</p></li><li><p>我们的模型只需要将原始的衣服图像和人的图像作为输入，对数据进行预处理简单，数据预处理只需要将图片进行裁剪和均值归一化，模型推导的预处理时间几乎可以忽略不计，大大加快了我们的推理速度。</p></li><li><p>我们使用onnxruntime推理引擎推导onnx模型，工程化后也大大加快了我们的推导速度，实现了推理不等待，效果立即出。</p></li><li><p>推导程序使用多线程编程，最大化的利用cpu硬件条件，提高推理速度。</p></li><li><p>我们部属的云服务器使用的是阿里云，其使用因特尔至强处理器，openvino推理框架对因特尔至强处理器有特殊的优化，相比onnxruntime推理引擎可以将推导时间缩短20%左右，我们尝试使用openvino推理框架重写推导程序部署在云服务器上，改善我们网页的使用体验（无忧工作室）</p></li></ul><h2 id=8-项目总结>8 项目总结</h2><h3 id=81-团队简介与团队文化>8.1 团队简介与团队文化</h3><h4 id=811-团队简介>8.1.1 团队简介</h4><p>团队五名成员皆是重点大学本科生，团队成员深知，团队分工情况与团队合作能力直接决定了一个项目或者一项工作的成功或者失败。 每一个成员可以根据自己能力的突出点去承担一部分工作。在每个责任块中，模糊上下级的概念，不存在领导与被领导的关系，而是集思广益、汇聚智慧的新团队合作模式。每个人都有责任义务去完成分内工作，并且在团队成员需要帮助时及时援助，也欢迎每个人提出自己的想法，大家对于不同的想法进行集中讨论，综合实践最后采用最优解法。 在整个工作开展过程中，我们团队自 2022 年 12 月至 2023 年 4 月始终坚持短期，中期，长期多种形式的组内交流会。确保贯穿项目始终能够全体成员进度步调统一，有新思想涌入并发生碰撞，不停审视反思团队近期执行状况，调整团队前进的方向。</p><h4 id=812-团队文化>8.1.2 团队文化</h4><p>团队给队伍取名为无忧工作室，首先是我们希望团队所研究的虚拟试衣实验能够切实地为未来虚拟试衣行业做出一定贡献，改善用户的在线购衣体验，让网上购衣不再困难忧心。其次，我们的团队是一个团结友爱的大家庭，不同专业的同学在团队中扮演着不同的角色，有不同的分工，我们共同面对困难，不放弃不退缩，想尽一切办法克服困难完成目标，正是这种团队协作精神，让我们的项目顺利进展，没有后顾之忧。</p><p>团队LOGO以无忧工作室开头两个首字母的大写结合而成，寓意无忧工作室是一个紧密结合的整体，团队的成功离不开每个成员的辛苦付出，LOGO右侧以黄底衬出“无忧工作室”五个字，简洁明了，与开头字母相呼应。</p><h3 id=82-项目规划>8.2 项目规划</h3><h4 id=821-进度计划>8.2.1 进度计划</h4><p>本项目在2022年12底立项组队，至2023年4月15日提交项目材料，总计约四个月时间。无忧工作室团队的具体进度安排如下表所示：</p><table><thead><tr><th>项目阶段</th><th>起止时间</th><th>任务安排</th></tr></thead><tbody><tr><td>项目选题阶段</td><td>2022.12.20-2022.1.5</td><td>赛题调研，结合团队优势选定赛题</td></tr><tr><td>技术选型阶段</td><td>2022.1.5-2022.2.1</td><td>阅读业内前沿算法相关论文，结合赛题选定技术路线</td></tr><tr><td>模型复现阶段</td><td>2022.2.5-2022.3.1</td><td>根据论文方法，优化模型结构并训练</td></tr><tr><td>模型测试阶段</td><td>2022.3.1-2022.3.10</td><td>优化提升模型性能，降低模型大小</td></tr><tr><td>web页面设计阶段</td><td>2023.2.20.1-2023.3.5</td><td>实现web页面的设计与代码编写</td></tr><tr><td>前后端本地部署阶段</td><td>2023.3.10-2023.3.20</td><td>前后端代码整合与测试，实现前后端的本地化部署</td></tr><tr><td>前后端服务器端部署</td><td>2023.3.20-2023.3.23</td><td>实现前后端的服务器端部署与测试</td></tr><tr><td>第一次阶段性总结</td><td>2023.3.23</td><td>对目前团队工作成果的总结回顾，给出作品后续优化方向</td></tr><tr><td>项目优化与文档收集</td><td>2023.3.23-2023.3.30</td><td>对总结提出的问题进行解决优化，收集团队汇总开发文档</td></tr><tr><td>文档编写与排版</td><td>2023.4.1-2023.4.5</td><td>完成项目文档初稿</td></tr><tr><td>文档修订与完善</td><td>2023.4.5-2023.4.10</td><td>修订完善文档初稿，完成开发文档</td></tr><tr><td>PPT编排与Web页面更新</td><td>2023.4.10-2023.4.14</td><td>设计实现展示PPT,在web页面上传项目文档</td></tr><tr><td>项目提交</td><td>2023.4.15</td><td>核验项目所有材料并提交</td></tr></tbody></table><p><strong>表 8-1 项目进度安排</strong></p><h4 id=822-开发文档管理>8.2.2 开发文档管理</h4><p>在项目开发期间，团队共编写相关技术文档35篇，总字数超5万字。为实现开发共享与技术交流，团队采用在线工作台模式，形成文档共享知识库，打造体系化的知识管理，极大提高了项目开发和文档编写效率。</p><h4 id=823-团队分工>8.2.3 团队分工</h4><p>团队技术结构如下所示：</p><p><strong><picture class="d-block text-center"><img class=img-fluid src="https://gitee.com/yao_yi_feng/fighouse/raw/master/img/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/202402271755576.webp?width=500#center" alt loading=lazy width=500>
</picture>图 8-1 团队技术结构图</strong></p><p>成员分工如下所示：</p><table><thead><tr><th>姓名</th><th>职务</th><th>分工介绍</th></tr></thead><tbody><tr><td>成员1</td><td>队长</td><td>团队配置，人员管理，项目进度控制，任务分配 组织小组会议，对关键项目节点（如模型确定）进行评审和决议 主要负责模型部分落地实现 负责各个项目阶段的评审</td></tr><tr><td>成员2</td><td>成员</td><td>1.参与模型技术选型与论文阅读 2.参与模型训练工作 3.参与数据集收集与扩充 4.负责项目web端部署；参与撰写项目文档</td></tr><tr><td>成员3</td><td>成员</td><td>参与模型技术选型与论文阅读 负责web前端页面设计与交互 参与编写web框架</td></tr><tr><td>成员4</td><td>成员</td><td>1参与模型技术选型与论文阅读 2.参与模型架构调整；负责项目文档设计与撰写</td></tr><tr><td>成员5</td><td>成员</td><td>负责web页面设计 负责页面动画、logo、及页面背景制作 负责ppt设计与展示</td></tr></tbody></table><p><strong>表 8-2 成员分工图</strong></p><h3 id=83项目总结>8.3项目总结</h3><p>从22年12月份组队到23年4月份项目提交，团队成员合作无间，分工明确，圆满完成了赛题所需工作，但难免有不足之处，我们的项目仍有以下可以改进和完善之处：</p><ul><li>模型大小</li></ul><p>目前效果较好的模型为FP6截断版本，大小为56MB，仍有优化空间。可以通过以下方法进一步缩小模型：</p><p>（1）剪枝：通过删除模型中的一些权重或神经元来减少模型大小。例如L1正则化、L2正则化、结构化剪枝等。</p><p>（2）量化：将模型中的浮点数参数转换为较小的整数，从而减少模型大小。这种方法可以通过使用一些量化算法来实现，例如线性量化、非线性量化、混合精度量化等。</p><p>（3）低秩分解：通过将卷积层或全连接层分解为多个较小的矩阵来减少模型大小。这种方法可以通过使用一些低秩分解算法来实现，例如SVD分解、CP分解、Tucker分解等。</p><ul><li>模型准确率</li></ul><p>（1）增加训练数据量，可以通过数据增强的方式来实现。</p><p>（2）调整模型的超参数，学习率、batch size等来调整模型性能。</p><p>（3）在模型大小与准确率之间取得较好的平衡。</p><p>就目前情况而言，虚拟试衣的应用场景主要是在线电商或数字营销，提升用户感官体验和交互体验。此外，虚拟试衣还可以应用于展厅、展馆、大型商场、超市等场景，吸引流量，快速试衣，让顾客体验到新颖高科技的购物模式，也节省购物时间。在未来，团队会尝试将该项目多方应用结合，助力元宇宙发展，使其与日常生活的融入更加贴近。</p><h2 id=9-参考文献>9 参考文献</h2><ol><li><p>Bertiche, H., Madadi, M., Escalera, S.: Cloth3d: clothed 3d humans. In:European Conference on Computer Vision. pp. 344–359. Springer (2020)</p></li><li><p>Bhatnagar, B.L., Tiwari, G., Theobalt, C., Pons-Moll, G.: Multi-garment net: Learning to dress 3d people from images. In: Proceedings of the IEEE/CVF international conference on computer vision. pp. 5420–5430 (2019)</p></li><li><p>Chang, A.X., Funkhouser, T., Guibas, L., Hanrahan, P., Huang, Q., Li, Z.,Savarese, S., Savva, M., Song, S., Su, H., et al.: Shapenet: An information-rich 3d model repository. arXiv preprint arXiv:1512.03012 (2015)</p></li><li><p>Choi, S., Park, S., Lee, M., Choo, J.: Viton-hd: High-resolution virtual try-on via misalignment-aware normalization. In: Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. pp. 14131–14140 (2021)</p></li><li><p>Chopra, A., Jain, R., Hemani, M., Krishnamurthy, B.: Zflow: Gated appearance flow-based virtual try-on with 3d priors. In: Proceedings of the IEEE/CVF InternationalConference on Computer Vision. pp. 5433–5442 (2021)</p></li><li><p>Dong, H., Liang, X., Shen, X., Wang, B., Lai, H., Zhu, J., Hu, Z., Yin, J.: Towards multi-pose guided virtual try-on network. In: Proceedings of the IEEE/CVF International Conference on Computer Vision. pp. 9026–9035 (2019)</p></li><li><p>Duchon, J.: Splines minimizing rotation-invariant semi-norms in sobolev spaces. In:Constructive theory of functions of several variables, pp. 85–100. Springer (1977)</p></li><li><p>Feng, Y., Wu, F., Shao, X., Wang, Y., Zhou, X.: Joint 3d face reconstruction and dense alignment with position map regression network. In: Proceedings of the European conference on computer vision (ECCV). pp. 534–551 (2018)</p></li><li><p>Ge, C., Song, Y., Ge, Y., Yang, H., Liu, W., Luo, P.: Disentangled cycle consistency for highly-realistic virtual try-on. In: Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. pp. 16928–16937 (2021)</p></li><li><p>Ge, Y., Song, Y., Zhang, R., Ge, C., Liu, W., Luo, P.: Parser-free virtual try-on via distilling appearance flows. In: Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. pp. 8485–8493 (2021)</p></li><li><p>Gong, K., Liang, X., Zhang, D., Shen, X., Lin, L.: Look into person: Self-supervised structure-sensitive learning and a new benchmark for human parsing. In: Proceedings of the IEEE conference on computer vision and pattern recognition. pp. 932–940 (2017)</p></li><li><p>Goodfellow, I., Pouget-Abadie, J., Mirza, M., Xu, B., Warde-Farley, D., Ozair, S.,Courville, A., Bengio, Y.: Generative adversarial nets. Advances in neural informationprocessing systems 27 (2014)</p></li><li><p>G¨uler, R.A., Neverova, N., Kokkinos, I.: Densepose: Dense human pose estimation in the wild. In: Proceedings of the IEEE conference on computer vision and patternrecognition. pp. 7297–7306 (2018)</p></li><li><p>Han, X., Hu, X., Huang, W., Scott, M.R.: Clothflow: A flow-based model for clothed person generation. In: Proceedings of the IEEE/CVF International Conference on Computer Vision. pp. 10471–10480 (2019)</p></li><li><p>Han, X., Wu, Z., Wu, Z., Yu, R., Davis, L.S.: Viton: An image-based virtual try-on network. In: Proceedings of the IEEE conference on computer vision and pattern recognition. pp. 7543–7552 (2018)</p></li><li><p>He, K., Zhang, X., Ren, S., Sun, J.: Deep residual learning for image recognition. In:Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition(CVPR) (June 2016)</p></li></ol></div><div class=hb-module><div class="hb-social-share-buttons d-flex align-items-center gap-2 justify-content-center"><a class="hb-social-share-button hb-social-share-button-sinaweibo text-decoration-none d-flex align-items-center" target=_blank title=微博 href="https://service.weibo.com/share/share.php?url=%2F%25E8%2599%259A%25E6%258B%259F%25E8%25AF%2595%25E8%25A1%25A3%2F%25E9%25A1%25B9%25E7%259B%25AE%25E8%25AF%25A6%25E7%25BB%2586%25E6%2596%25B9%25E6%25A1%2588%2F&amp;title=%E9%A1%B9%E7%9B%AE%E8%AF%A6%E7%BB%86%E6%96%B9%E6%A1%88"><svg aria-hidden="true" class="hi-svg-inline hb-social-share-button-icon me-1" fill="currentcolor" height="1.25em" role="img" style="color:#e6162d" viewBox="0 0 24 24" width="1.25em" xmlns="http://www.w3.org/2000/svg"><title>Sina Weibo</title><path d="M10.098 20.323c-3.977.391-7.414-1.406-7.672-4.02-.259-2.609 2.759-5.047 6.74-5.441 3.979-.394 7.413 1.404 7.671 4.018.259 2.6-2.759 5.049-6.737 5.439l-.002.004zM9.05 17.219c-.384.616-1.208.884-1.829.602-.612-.279-.793-.991-.406-1.593.379-.595 1.176-.861 1.793-.601.622.263.82.972.442 1.592zm1.27-1.627c-.141.237-.449.353-.689.253-.236-.09-.313-.361-.177-.586.138-.227.436-.346.672-.24.239.09.315.36.18.601l.014-.028zm.176-2.719c-1.893-.493-4.033.45-4.857 2.118-.836 1.704-.026 3.591 1.886 4.21 1.983.64 4.318-.341 5.132-2.179.8-1.793-.201-3.642-2.161-4.149zm7.563-1.224c-.346-.105-.57-.18-.405-.615.375-.977.42-1.804.0-2.404-.781-1.112-2.915-1.053-5.364-.03.0.0-.766.331-.571-.271.376-1.217.315-2.224-.27-2.809-1.338-1.337-4.869.045-7.888 3.08C1.309 10.87.0 13.273.0 15.348c0 3.981 5.099 6.395 10.086 6.395 6.536.0 10.888-3.801 10.888-6.82.0-1.822-1.547-2.854-2.915-3.284v.01zm1.908-5.092c-.766-.856-1.908-1.187-2.96-.962-.436.09-.706.511-.616.932.09.42.511.691.932.602.511-.105 1.067.044 1.442.465.376.421.466.977.316 1.473-.136.406.089.856.51.992.405.119.857-.105.992-.512.33-1.021.12-2.178-.646-3.035l.03.045zm2.418-2.195c-1.576-1.757-3.905-2.419-6.054-1.968-.496.104-.812.587-.706 1.081.104.496.586.813 1.082.707 1.532-.331 3.185.15 4.296 1.383 1.112 1.246 1.429 2.943.947 4.416-.165.48.106 1.007.586 1.157.479.165.991-.104 1.157-.586.675-2.088.241-4.478-1.338-6.235l.03.045z"/></svg>
<span class=hb-social-share-button-label>微博</span>
</a><a class="hb-social-share-button hb-social-share-button-linkedin text-decoration-none d-flex align-items-center" target=_blank title=领英 href="https://www.linkedin.com/sharing/share-offsite/?url=%2F%25E8%2599%259A%25E6%258B%259F%25E8%25AF%2595%25E8%25A1%25A3%2F%25E9%25A1%25B9%25E7%259B%25AE%25E8%25AF%25A6%25E7%25BB%2586%25E6%2596%25B9%25E6%25A1%2588%2F"><svg aria-hidden="true" class="hi-svg-inline hb-social-share-button-icon me-1" fill="currentcolor" height="1.25em" role="img" style="color:#0a66c2" viewBox="0 0 24 24" width="1.25em" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601.0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144.0-2.063-.926-2.063-2.065.0-1.138.92-2.063 2.063-2.063 1.14.0 2.064.925 2.064 2.063.0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0h.003z"/></svg>
<span class=hb-social-share-button-label>领英</span></a></div></div><ul class="hb-docs-doc-nav nav hb-module justify-content-between"><li class="nav-item my-1"><a class="nav-link p-0 d-flex align-items-center" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E8%A7%86%E9%A2%91%E7%AE%80%E4%BB%8B/><svg aria-hidden="true" class="bi bi-arrow-left-circlebi bi-arrow-left-circle hi-svg-inline me-2" fill="currentcolor" height="1.5em" viewBox="0 0 16 16" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 8a7 7 0 1014 0A7 7 0 001 8m15 0A8 8 0 110 8a8 8 0 0116 0m-4.5-.5a.5.5.0 010 1H5.707l2.147 2.146a.5.5.0 01-.708.708l-3-3a.5.5.0 010-.708l3-3a.5.5.0 11.708.708L5.707 7.5z"/></svg>视频简介</a></li><li class="nav-item my-1"><a class="nav-link p-0 d-flex align-items-center" href=/%E8%99%9A%E6%8B%9F%E8%AF%95%E8%A1%A3/%E6%88%90%E6%9E%9C%E7%BD%91%E7%AB%99/>成果网站<svg aria-hidden="true" class="bi bi-arrow-right-circlebi bi-arrow-right-circle hi-svg-inline ms-2" fill="currentcolor" height="1.5em" viewBox="0 0 16 16" width="1.5em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 8a7 7 0 1014 0A7 7 0 001 8m15 0A8 8 0 110 8a8 8 0 0116 0M4.5 7.5a.5.5.0 000 1h5.793l-2.147 2.146a.5.5.0 00.708.708l3-3a.5.5.0 000-.708l-3-3a.5.5.0 10-.708.708L10.293 7.5z"/></svg></a></li></ul><div id=content-comments class="hb-docs-doc-comments hb-module"></div></div></div></div></div></div><footer class="hb-footer pt-4 pt-md-5 pb-2 pb-md-3 bg-body-tertiary"><div class="container-fluid container-lg px-4 px-md-3"><div class=row><div class="hb-footer-site-info col mb-2 text-center"><div class=h5>Yifeng's Blog</div><ul class="list-unstyled small mb-2"><li class=mt-2>一个练习两年半的CVer</li><li class=mt-2>Built with ❤️ from <a class=text-body-emphasis href=https://gohugo.io/ target=_blank rel=external title=Hugo>Hugo</a>, <a class=text-body-emphasis href=https://hugomods.com/ target=_blank rel=external title=HugoMods>HugoMods</a> and <a class=text-body-emphasis href=https://hbstack.dev/ target=_blank rel=external title="HB Framework">HB Framework</a>.</li></ul></div></div></div></footer><script src=/js/hb.bc278f0b8ffe03f9d65bf0604f110147c7863d6c24646554864326e458998ba0.js integrity="sha256-vCePC4/+A/nWW/BgTxEBR8eGPWwkZGVUhkMm5FiZi6A=" defer></script><div id=pwa-installer class="position-fixed bottom-0 start-0 mb-0 w-100 text-center py-3 py-lg-4 px-1 bg-body border-top d-none"><button type=button class="btn btn-primary btn-lg px-4 btn-pwa-install d-flex align-items-center mx-auto">
<svg aria-hidden="true" class="bi bi-cloud-arrow-down-fillbi bi-cloud-arrow-down-fill hi-svg-inline pwa-installer-icon me-2" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path d="M8 2A5.53 5.53.0 004.406 3.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095.0 7.555.0 9.318.0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2m2.354 6.854-2 2a.5.5.0 01-.708.0l-2-2a.5.5.0 11.708-.708L7.5 9.293V5.5a.5.5.0 011 0v3.793l1.146-1.147a.5.5.0 01.708.708"/></svg>
安装
</button>
<button type=button class="position-absolute top-0 end-0 btn-close mt-2 me-2" aria-label=Close></button></div><script src=/js/search.7150d46c163a34cd7d9a358681704251c4148d4296da988a33a3274cfd9161a6.js defer></script><script>"serviceWorker"in navigator&&window.addEventListener("DOMContentLoaded",function(){navigator.serviceWorker.register("/sw.js")})</script></body></html>